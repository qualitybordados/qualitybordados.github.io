 */"function"==typeof Object.is&&Object.is,o7.useSyncExternalStore,o7.useRef,o7.useEffect,o7.useMemo,o7.useDebugValue;var s7={notify(){},get:()=>[]};var l7=(()=>!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement))(),c7=(()=>"undefined"!=typeof navigator&&"ReactNative"===navigator.product)(),u7=(()=>l7||c7?wt.useLayoutEffect:wt.useEffect)(),d7=Symbol.for("react-redux-context"),h7="undefined"!=typeof globalThis?globalThis:{};function f7(){if(!wt.createContext)return{};const e=h7[d7]??(h7[d7]=new Map);let t=e.get(wt.createContext);return t||(t=wt.createContext(null),e.set(wt.createContext,t)),t}var p7=f7();var m7=function(e){const{children:t,context:n,serverState:r,store:i}=e,a=wt.useMemo(()=>{const e=function(e){let t,n=s7,r=0,i=!1;function a(){l.onStateChange&&l.onStateChange()}function o(){r++,t||(t=e.subscribe(a),n=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){!function(e){e()}(()=>{let t=e;for(;t;)t.callback(),t=t.next})},get(){const t=[];let n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){r&&null!==e&&(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}())}function s(){r--,t&&0===r&&(t(),t=void 0,n.clear(),n=s7)}const l={addNestedSub:function(e){o();const t=n.subscribe(e);let r=!1;return()=>{r||(r=!0,t(),s())}},notifyNestedSubs:function(){n.notify()},handleChangeWrapper:a,isSubscribed:function(){return i},trySubscribe:function(){i||(i=!0,o())},tryUnsubscribe:function(){i&&(i=!1,s())},getListeners:()=>n};return l}(i);return{store:i,subscription:e,getServerState:r?()=>r:void 0}},[i,r]),o=wt.useMemo(()=>i.getState(),[i]);u7(()=>{const{subscription:e}=a;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),o!==i.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}},[a,o]);const s=n||p7;return wt.createElement(s.Provider,{value:a},t)},g7=nV([(e,t)=>t,dq,nX,oX,f1,y1,F1,JB],(e,t,n,r,i,a,o,s)=>{if(e&&t&&r&&i&&a){var l=function(e,t,n,r,i){return"horizontal"===n||"vertical"===n?e>=i.left&&e<=i.left+i.width&&t>=i.top&&t<=i.top+i.height?{x:e,y:t}:null:r?SB({x:e,y:t},r):null}(e.chartX,e.chartY,t,n,s);if(l){var c=((e,t)=>"horizontal"===t?e.x:"vertical"===t?e.y:"centric"===t?e.angle:e.radius)(l,t),u=((e,t,n,r,i)=>{var a,o=-1,s=null!==(a=null==t?void 0:t.length)&&void 0!==a?a:0;if(s<=1||null==e)return 0;if("angleAxis"===r&&null!=i&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var l=0;l<s;l++){var c=l>0?n[l-1].coordinate:n[s-1].coordinate,u=n[l].coordinate,d=l>=s-1?n[0].coordinate:n[l+1].coordinate,h=void 0;if(YL(u-c)!==YL(d-u)){var f=[];if(YL(d-u)===YL(i[1]-i[0])){h=d;var p=u+i[1]-i[0];f[0]=Math.min(p,(p+c)/2),f[1]=Math.max(p,(p+c)/2)}else{h=c;var m=d+i[1]-i[0];f[0]=Math.min(u,(m+u)/2),f[1]=Math.max(u,(m+u)/2)}var g=[Math.min(u,(h+u)/2),Math.max(u,(h+u)/2)];if(e>g[0]&&e<=g[1]||e>=f[0]&&e<=f[1]){({index:o}=n[l]);break}}else{var y=Math.min(c,d),v=Math.max(c,d);if(e>(y+u)/2&&e<=(v+u)/2){({index:o}=n[l]);break}}}else if(t)for(var b=0;b<s;b++)if(0===b&&e<=(t[b].coordinate+t[b+1].coordinate)/2||b>0&&b<s-1&&e>(t[b].coordinate+t[b-1].coordinate)/2&&e<=(t[b].coordinate+t[b+1].coordinate)/2||b===s-1&&e>(t[b].coordinate+t[b-1].coordinate)/2){({index:o}=t[b]);break}return o})(c,o,a,r,i),d=((e,t,n,r)=>{var i=t.find(e=>e&&e.index===n);if(i){if("horizontal"===e)return{x:i.coordinate,y:r.y};if("vertical"===e)return{x:r.x,y:i.coordinate};if("centric"===e){var a=i.coordinate,{radius:o}=r;return OB(OB(OB({},r),xB(r.cx,r.cy,o,a)),{},{angle:a,radius:o})}var s=i.coordinate,{angle:l}=r;return OB(OB(OB({},r),xB(r.cx,r.cy,s,l)),{},{angle:l,radius:s})}return{x:0,y:0}})(t,a,u,l);return{activeIndex:String(u),activeCoordinate:d}}}}),y7=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,r=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/r)}},v7=g$("mouseClick"),b7=lB();b7.startListening({actionCreator:v7,effect:(e,t)=>{var n=e.payload,r=g7(t.getState(),y7(n));null!=(null==r?void 0:r.activeIndex)&&t.dispatch(E0({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var w7=g$("mouseMove"),x7=lB();x7.startListening({actionCreator:w7,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=d0(r,r.tooltip.settings.shared),a=g7(r,y7(n));"axis"===i&&(null!=(null==a?void 0:a.activeIndex)?t.dispatch(_0({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):t.dispatch(w0()))}});var _7={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},E7=A$({name:"rootProps",initialState:_7,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=null!==(n=t.payload.barGap)&&void 0!==n?n:_7.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),S7=E7.reducer,{updateOptions:k7}=E7.actions,C7=A$({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:O7}=C7.actions,T7=C7.reducer,A7=g$("keyDown"),N7=g$("focus"),I7=lB();I7.startListening({actionCreator:A7,effect:(e,t)=>{var n=t.getState();if(!1!==n.rootProps.accessibilityLayer){var{keyboardInteraction:r}=n.tooltip,i=e.payload;if("ArrowRight"===i||"ArrowLeft"===i||"Enter"===i){var a=Number(I0(r,K0(n))),o=y1(n);if("Enter"!==i){var s=a+("ArrowRight"===i?1:-1)*("left-to-right"===s0(n)?1:-1);if(!(null==o||s>=o.length||s<0)){var l=$1(n,"axis","hover",String(s));t.dispatch(k0({active:!0,activeIndex:s.toString(),activeDataKey:void 0,activeCoordinate:l}))}}else{var c=$1(n,"axis","hover",String(r.index));t.dispatch(k0({active:!r.active,activeIndex:r.index,activeDataKey:r.dataKey,activeCoordinate:c}))}}}}}),I7.startListening({actionCreator:N7,effect:(e,t)=>{var n=t.getState();if(!1!==n.rootProps.accessibilityLayer){var{keyboardInteraction:r}=n.tooltip;if(!r.active&&null==r.index){var i=$1(n,"axis","hover",String("0"));t.dispatch(k0({activeDataKey:void 0,active:!0,activeIndex:"0",activeCoordinate:i}))}}}});var P7=g$("externalEvent"),j7=lB();j7.startListening({actionCreator:P7,effect:(e,t)=>{if(null!=e.payload.handler){var n=t.getState(),r={activeCoordinate:O1(n),activeDataKey:S1(n),activeIndex:_1(n),activeLabel:E1(n),activeTooltipIndex:_1(n),isTooltipActive:T1(n)};e.payload.handler(r,e.payload.reactEvent)}}});var D7=nV([M0],e=>e.tooltipItemPayloads),M7=nV([D7,D0,(e,t,n)=>t,(e,t,n)=>n],(e,t,n,r)=>{var i=e.find(e=>e.settings.dataKey===r);if(null!=i){var{positions:a}=i;if(null!=a)return t(a,n)}}),R7=g$("touchMove"),L7=lB();L7.startListening({actionCreator:R7,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=d0(r,r.tooltip.settings.shared);if("axis"===i){var a=g7(r,y7({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));null!=(null==a?void 0:a.activeIndex)&&t.dispatch(_0({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if("item"===i){var o,s=n.touches[0],l=document.elementFromPoint(s.clientX,s.clientY);if(!l||!l.getAttribute)return;var c=l.getAttribute("data-recharts-item-index"),u=null!==(o=l.getAttribute("data-recharts-item-data-key"))&&void 0!==o?o:void 0,d=M7(t.getState(),c,u);t.dispatch(v0({activeDataKey:u,activeIndex:c,activeCoordinate:d}))}}});var F7=bV({brush:a5,cartesianAxis:q3,chartData:f2,errorBars:u6,graphicalItems:I3,layout:mB,legend:vq,options:o2,polarAxis:X4,polarOptions:T7,referenceElements:p5,rootProps:S7,tooltip:C0});function z7(e){var{preloadedState:t,children:n,reduxStoreName:r}=e,i=rq(),a=wt.useRef(null);if(i)return n;null==a.current&&(a.current=function(e){return _$({reducer:F7,preloadedState:e,middleware:e=>e({serializableCheck:!1}).concat([b7.middleware,x7.middleware,I7.middleware,j7.middleware,L7.middleware]),devTools:jq})}(t));var o=BU;return wt.createElement(m7,{context:o,store:a.current},n)}function U7(e){var{layout:t,width:n,height:r,margin:i}=e,a=WU(),o=rq();return wt.useEffect(()=>{o||(a(hB(t)),a(fB({width:n,height:r})),a(dB(i)))},[a,o,t,n,r,i]),null}function V7(e){var t=WU();return wt.useEffect(()=>{t(k7(e))},[t,e]),null}var $7=["children"];function B7(){return B7=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B7.apply(null,arguments)}var q7={width:"100%",height:"100%"},W7=wt.forwardRef((e,t)=>{var n=cq(),r=uq(),i=Mq();if(!Lq(n)||!Lq(r))return null;var a,o,{children:s,otherAttributes:l,title:c,desc:u}=e;return a="number"==typeof l.tabIndex?l.tabIndex:i?0:void 0,o="string"==typeof l.role?l.role:i?"application":void 0,wt.createElement(CF,B7({},l,{title:c,desc:u,role:o,tabIndex:a,width:n,height:r,style:q7,ref:t}),s)}),K7=e=>{var{children:t}=e,n=QU(aq);if(!n)return null;var{width:r,height:i,y:a,x:o}=n;return wt.createElement(CF,{width:r,height:i,x:o,y:a},t)},H7=wt.forwardRef((e,t)=>{var{children:n}=e,r=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,$7);return rq()?wt.createElement(K7,null,n):wt.createElement(W7,B7({ref:t},r),n)});function G7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Q7(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G7(Object(n),!0).forEach(function(t){Y7(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G7(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Y7(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Z7=wt.forwardRef((e,t)=>{var{children:n,className:r,height:i,onClick:a,onContextMenu:o,onDoubleClick:s,onMouseDown:l,onMouseEnter:c,onMouseLeave:u,onMouseMove:d,onMouseUp:h,onTouchEnd:f,onTouchMove:p,onTouchStart:m,style:g,width:y}=e,v=WU(),[b,w]=wt.useState(null),[x,_]=wt.useState(null);w2();var E=function(){var e=WU(),[t,n]=wt.useState(null),r=QU(KB);return wt.useEffect(()=>{if(null!=t){var n=t.getBoundingClientRect().width/t.offsetWidth;Rq(n)&&n!==r&&e(pB(n))}},[t,e,r]),n}(),S=wt.useCallback(e=>{E(e),"function"==typeof t&&t(e),w(e),_(e)},[E,t,w,_]),k=wt.useCallback(e=>{v(v7(e)),v(P7({handler:a,reactEvent:e}))},[v,a]),C=wt.useCallback(e=>{v(w7(e)),v(P7({handler:c,reactEvent:e}))},[v,c]),O=wt.useCallback(e=>{v(w0()),v(P7({handler:u,reactEvent:e}))},[v,u]),T=wt.useCallback(e=>{v(w7(e)),v(P7({handler:d,reactEvent:e}))},[v,d]),A=wt.useCallback(()=>{v(N7())},[v]),N=wt.useCallback(e=>{v(A7(e.key))},[v]),I=wt.useCallback(e=>{v(P7({handler:o,reactEvent:e}))},[v,o]),P=wt.useCallback(e=>{v(P7({handler:s,reactEvent:e}))},[v,s]),j=wt.useCallback(e=>{v(P7({handler:l,reactEvent:e}))},[v,l]),D=wt.useCallback(e=>{v(P7({handler:h,reactEvent:e}))},[v,h]),M=wt.useCallback(e=>{v(P7({handler:m,reactEvent:e}))},[v,m]),R=wt.useCallback(e=>{v(R7(e)),v(P7({handler:p,reactEvent:e}))},[v,p]),L=wt.useCallback(e=>{v(P7({handler:f,reactEvent:e}))},[v,f]);return wt.createElement(J1.Provider,{value:b},wt.createElement(NF.Provider,{value:x},wt.createElement("div",{className:uR("recharts-wrapper",r),style:Q7({position:"relative",cursor:"default",width:y,height:i},g),onClick:k,onContextMenu:I,onDoubleClick:P,onFocus:A,onKeyDown:N,onMouseDown:j,onMouseEnter:C,onMouseLeave:O,onMouseMove:T,onMouseUp:D,onTouchEnd:L,onTouchMove:R,onTouchStart:M,ref:S},n)))}),X7=["children","className","width","height","style","compact","title","desc"];var J7=wt.forwardRef((e,t)=>{var{children:n,className:r,width:i,height:a,style:o,compact:s,title:l,desc:c}=e,u=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,X7),d=yF(u);return s?wt.createElement(H7,{otherAttributes:d,title:l,desc:c},n):wt.createElement(Z7,{className:r,style:o,width:i,height:a,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},wt.createElement(H7,{otherAttributes:d,title:l,desc:c,ref:t},wt.createElement(g5,null,n)))}),e8=["width","height"];function t8(){return t8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t8.apply(null,arguments)}var n8={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},r8=wt.forwardRef(function(e,t){var n,r=nW(e.categoricalChartProps,n8),{width:i,height:a}=r,o=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(r,e8);if(!Lq(i)||!Lq(a))return null;var{chartName:s,defaultTooltipEventType:l,validateTooltipEventTypes:c,tooltipPayloadSearcher:u,categoricalChartProps:d}=e,h={chartName:s,defaultTooltipEventType:l,validateTooltipEventTypes:c,tooltipPayloadSearcher:u,eventEmitter:void 0};return wt.createElement(z7,{preloadedState:{options:h},reduxStoreName:null!==(n=d.id)&&void 0!==n?n:s},wt.createElement(t5,{chartData:d.data}),wt.createElement(U7,{width:i,height:a,layout:r.layout,margin:r.margin}),wt.createElement(V7,{accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className}),wt.createElement(J7,t8({},o,{width:i,height:a,ref:t})))}),i8=["axis"],a8=wt.forwardRef((e,t)=>wt.createElement(r8,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:i8,tooltipPayloadSearcher:i2,categoricalChartProps:e,ref:t})),o8=["axis","item"],s8=wt.forwardRef((e,t)=>wt.createElement(r8,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:o8,tooltipPayloadSearcher:i2,categoricalChartProps:e,ref:t}));function l8(){const{user:e,loading:t}=oL(),n=!!e&&!t,{data:r,isLoading:i,isFetching:a,isError:o}=function(e={}){return Nm({queryKey:["dashboard"],queryFn:yL,staleTime:6e4,enabled:e.enabled})}({enabled:n});return t||i||n&&a&&!r?Nt.jsx("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:Array.from({length:4}).map((e,t)=>Nt.jsxs(cL,{className:"animate-pulse",children:[Nt.jsx(uL,{children:Nt.jsx("div",{className:"h-4 w-24 rounded bg-slate-200"})}),Nt.jsx(hL,{children:Nt.jsx("div",{className:"h-8 w-32 rounded bg-slate-200"})})]},t))}):o&&n||!r?Nt.jsx(YR,{variant:"destructive",title:"No fue posible cargar el tablero",description:"Reintenta en unos segundos."}):Nt.jsxs("div",{className:"space-y-8",children:[Nt.jsxs("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:[Nt.jsxs(cL,{children:[Nt.jsx(uL,{children:Nt.jsx(dL,{children:"Pedidos activos"})}),Nt.jsxs(hL,{children:[Nt.jsx("p",{className:"text-3xl font-semibold text-primary",children:r.pedidosActivos}),Nt.jsx("p",{className:"text-xs text-slate-500",children:"Pedidos en producción o pendientes de cierre."})]})]}),Nt.jsxs(cL,{children:[Nt.jsx(uL,{children:Nt.jsx(dL,{children:"Cartera vencida"})}),Nt.jsxs(hL,{children:[Nt.jsx("p",{className:"text-3xl font-semibold text-red-600",children:xL(r.carteraVencida)}),Nt.jsx("p",{className:"text-xs text-slate-500",children:"Saldo de pedidos con fecha compromiso vencida."})]})]}),Nt.jsxs(cL,{children:[Nt.jsx(uL,{children:Nt.jsx(dL,{children:"Flujo caja últimos 7 días"})}),Nt.jsxs(hL,{children:[Nt.jsx("p",{className:"text-3xl font-semibold text-emerald-600",children:xL(r.flujoCaja.reduce((e,t)=>e+t.monto,0))}),Nt.jsx("p",{className:"text-xs text-slate-500",children:"Ingresos - egresos de la última semana."})]})]}),Nt.jsxs(cL,{children:[Nt.jsx(uL,{children:Nt.jsx(dL,{children:"Entregas próximos 3 días"})}),Nt.jsxs(hL,{children:[Nt.jsx("p",{className:"text-3xl font-semibold text-amber-600",children:r.entregasProximas}),Nt.jsx("p",{className:"text-xs text-slate-500",children:"Pedidos con fecha compromiso cercana."})]})]})]}),Nt.jsxs("div",{className:"grid gap-8 lg:grid-cols-2",children:[Nt.jsxs(cL,{className:"h-full",children:[Nt.jsx(uL,{children:Nt.jsx(dL,{children:"Pedidos por estado"})}),Nt.jsx(hL,{className:"h-80",children:r.pedidosPorEstado.length?Nt.jsx(L2,{width:"100%",height:"100%",children:Nt.jsxs(s8,{data:r.pedidosPorEstado,children:[Nt.jsx(i9,{strokeDasharray:"3 3"}),Nt.jsx(H9,{dataKey:"estado",tick:{fontSize:12}}),Nt.jsx(a7,{allowDecimals:!1}),Nt.jsx(T2,{}),Nt.jsx(V6,{dataKey:"total",fill:"#2563EB",radius:[8,8,0,0]})]})}):Nt.jsx(SL,{title:"Sin pedidos",description:"Crea pedidos para visualizar su distribución por estado."})})]}),Nt.jsxs(cL,{className:"h-full",children:[Nt.jsx(uL,{children:Nt.jsx(dL,{children:"Flujo de caja 7 días"})}),Nt.jsx(hL,{className:"h-80",children:r.flujoCaja.length?Nt.jsx(L2,{width:"100%",height:"100%",children:Nt.jsxs(a8,{data:r.flujoCaja.map(e=>({...e,fechaLabel:_L(e.fecha)})),children:[Nt.jsx(i9,{strokeDasharray:"3 3"}),Nt.jsx(H9,{dataKey:"fechaLabel",tick:{fontSize:12}}),Nt.jsx(a7,{}),Nt.jsx(T2,{formatter:e=>xL(e)}),Nt.jsx(M9,{type:"monotone",dataKey:"monto",stroke:"#0EA5E9",strokeWidth:2,dot:{r:3}})]})}):Nt.jsx(SL,{title:"Sin movimientos registrados",description:"Registra ingresos o egresos en Caja para visualizar el flujo."})})]})]})]})}const c8=fR("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-slate-900 text-slate-50 hover:bg-slate-900/80",secondary:"border-transparent bg-slate-100 text-slate-900",success:"border-transparent bg-emerald-100 text-emerald-700",warning:"border-transparent bg-amber-100 text-amber-800",destructive:"border-transparent bg-red-100 text-red-700",outline:"text-slate-900"}},defaultVariants:{variant:"default"}});function u8({className:e,variant:t,...n}){return Nt.jsx("div",{className:uR(c8({variant:t}),e),...n})}function d8({className:e,...t}){return Nt.jsx("table",{className:uR("w-full caption-bottom text-sm",e),...t})}function h8({className:e,...t}){return Nt.jsx("thead",{className:uR("[&_tr]:border-b",e),...t})}function f8({className:e,...t}){return Nt.jsx("tbody",{className:uR("[&_tr:last-child]:border-0",e),...t})}function p8({className:e,...t}){return Nt.jsx("tr",{className:uR("border-b transition-colors hover:bg-slate-50 data-[state=selected]:bg-slate-100",e),...t})}function m8({className:e,...t}){return Nt.jsx("th",{className:uR("h-10 px-2 text-left align-middle text-xs font-medium text-slate-500",e),...t})}function g8({className:e,...t}){return Nt.jsx("td",{className:uR("p-2 align-middle text-sm text-slate-700",e),...t})}const y8=dx({nombre_legal:Pw().min(3,"Ingresa el nombre fiscal"),alias:Pw().min(2,"Ingresa un alias"),rfc:Pw().toUpperCase().regex(/^([A-ZÑ&]{3,4})(\d{2})(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])[A-Z\d]{3}$/,"RFC inválido"),email:Pw().email("Correo inválido"),telefono:Pw().regex(/^\d{10}$/,"Teléfono a 10 dígitos"),direccion:Pw().min(5,"Dirección requerida"),ciudad:Pw().min(2,"Ciudad requerida"),cp:Pw().min(5,"Código postal requerido"),limite_credito:Ax().min(0).multipleOf(.01),dias_credito:Ax().int().min(0),estatus:mx(["ACTIVO","PAUSADO"])}),v8=dx({descripcion_item:Pw().min(3),prenda:Pw().min(1),talla:Pw().min(1),color_prenda:Pw().min(1),ubicacion:Pw().min(1),puntadas_estimadas:Ax().min(0),cantidad:Ax().min(1),precio_unitario:Ax().min(0).multipleOf(.01),observaciones:Pw().optional().default("")});dx({anticipo:Ax().min(0).multipleOf(.01),subtotal:Ax().min(0).multipleOf(.01),descuento:Ax().min(0).multipleOf(.01),impuestos:Ax().min(0).multipleOf(.01),total:Ax().min(0).multipleOf(.01),saldo:Ax().min(0).multipleOf(.01)}),dx({folio:Pw().min(3),cliente_id:Pw(),fecha_pedido:sx(),fecha_compromiso:sx(),status:mx(["COTIZACIÓN","APROBADO","DIGITIZADO","EN_PRODUCCIÓN","CALIDAD","LISTO_ENTREGA","ENTREGADO","CERRADO","CANCELADO"]),prioridad:mx(["BAJA","MEDIA","ALTA"]),notas:Pw().optional().default(""),anticipo:Ax().min(0).multipleOf(.01),subtotal:Ax().min(0).multipleOf(.01),descuento:Ax().min(0).multipleOf(.01),impuestos:Ax().min(0).multipleOf(.01),total:Ax().min(0).multipleOf(.01),saldo:Ax().min(0).multipleOf(.01),items:cx(v8).min(1)}),dx({pedido_id:Pw(),cliente_id:Pw(),fecha:sx(),monto:Ax().min(0).multipleOf(.01),metodo:mx(["EFECTIVO","TRANSFERENCIA","TARJETA"]),ref:Pw().optional().default(""),notas:Pw().optional().default("")}),dx({fecha:sx(),tipo:mx(["INGRESO","EGRESO"]),categoria:Pw().min(2),monto:Ax().min(0).multipleOf(.01),referencia_pedido_id:Pw().optional(),notas:Pw().optional().default("")});const b8=dx({porcentaje_anticipo:Ax().min(0).max(100),dias_credito:Ax().min(0),politicas_credito:Pw().optional().default(""),roles_visibles:cx(mx(["OWNER","ADMIN","VENTAS","PRODUCCION","COBRANZA"])).min(1)});function w8(e,[t,n]){return Math.min(n,Math.max(t,e))}function x8(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(null==e||e(r),!1===n||!r.defaultPrevented)return null==t?void 0:t(r)}}function _8(e,t=[]){let n=[];const r=()=>{const t=n.map(e=>wt.createContext(e));return function(n){const r=(null==n?void 0:n[e])||t;return wt.useMemo(()=>({[`__scope${e}`]:{...n,[e]:r}}),[n,r])}};return r.scopeName=e,[function(t,r){const i=wt.createContext(r),a=n.length;n=[...n,r];const o=t=>{var n;const{scope:r,children:o,...s}=t,l=(null==(n=null==r?void 0:r[e])?void 0:n[a])||i,c=wt.useMemo(()=>s,Object.values(s));return Nt.jsx(l.Provider,{value:c,children:o})};return o.displayName=t+"Provider",[o,function(n,o){var s;const l=(null==(s=null==o?void 0:o[e])?void 0:s[a])||i,c=wt.useContext(l);if(c)return c;if(void 0!==r)return r;throw new Error(`\`${n}\` must be used within \`${t}\``)}]},E8(r,...t)]}function E8(...e){const t=e[0];if(1===e.length)return t;const n=()=>{const n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const r=n.reduce((t,{useScope:n,scopeName:r})=>({...t,...n(e)[`__scope${r}`]}),{});return wt.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return n.scopeName=t.scopeName,n}function S8(e){const t=e+"CollectionProvider",[n,r]=_8(t),[i,a]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=e=>{const{scope:t,children:n}=e,r=xt.useRef(null),a=xt.useRef(new Map).current;return Nt.jsx(i,{scope:t,itemMap:a,collectionRef:r,children:n})};o.displayName=t;const s=e+"CollectionSlot",l=iR(s),c=xt.forwardRef((e,t)=>{const{scope:n,children:r}=e,i=rR(t,a(s,n).collectionRef);return Nt.jsx(l,{ref:i,children:r})});c.displayName=s;const u=e+"CollectionItemSlot",d="data-radix-collection-item",h=iR(u),f=xt.forwardRef((e,t)=>{const{scope:n,children:r,...i}=e,o=xt.useRef(null),s=rR(t,o),l=a(u,n);return xt.useEffect(()=>(l.itemMap.set(o,{ref:o,...i}),()=>{l.itemMap.delete(o)})),Nt.jsx(h,{[d]:"",ref:s,children:r})});return f.displayName=u,[{Provider:o,Slot:c,ItemSlot:f},function(t){const n=a(e+"CollectionConsumer",t),r=xt.useCallback(()=>{const e=n.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll(`[${d}]`)),r=Array.from(n.itemMap.values()).sort((e,n)=>t.indexOf(e.ref.current)-t.indexOf(n.ref.current));return r},[n.collectionRef,n.itemMap]);return r},r]}var k8=wt.createContext(void 0);function C8(e){const t=wt.useContext(k8);return e||t||"ltr"}function O8(e){const t=wt.useRef(e);return wt.useEffect(()=>{t.current=e}),wt.useMemo(()=>(...e)=>{var n;return null==(n=t.current)?void 0:n.call(t,...e)},[])}var T8,A8="dismissableLayer.update",N8="dismissableLayer.pointerDownOutside",I8="dismissableLayer.focusOutside",P8=wt.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),j8=wt.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:o,onDismiss:s,...l}=e,c=wt.useContext(P8),[u,d]=wt.useState(null),h=(null==u?void 0:u.ownerDocument)??(null==globalThis?void 0:globalThis.document),[,f]=wt.useState({}),p=rR(t,e=>d(e)),m=Array.from(c.layers),[g]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=m.indexOf(g),v=u?m.indexOf(u):-1,b=c.layersWithOutsidePointerEventsDisabled.size>0,w=v>=y,x=function(e,t=(null==globalThis?void 0:globalThis.document)){const n=O8(e),r=wt.useRef(!1),i=wt.useRef(()=>{});return wt.useEffect(()=>{const e=e=>{if(e.target&&!r.current){let r=function(){M8(N8,n,a,{discrete:!0})};const a={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",i.current),i.current=r,t.addEventListener("click",i.current,{once:!0})):r()}else t.removeEventListener("click",i.current);r.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",e),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}(e=>{const t=e.target,n=[...c.branches].some(e=>e.contains(t));w&&!n&&(null==i||i(e),null==o||o(e),e.defaultPrevented||null==s||s())},h),_=function(e,t=(null==globalThis?void 0:globalThis.document)){const n=O8(e),r=wt.useRef(!1);return wt.useEffect(()=>{const e=e=>{if(e.target&&!r.current){M8(I8,n,{originalEvent:e},{discrete:!1})}};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}(e=>{const t=e.target;[...c.branches].some(e=>e.contains(t))||(null==a||a(e),null==o||o(e),e.defaultPrevented||null==s||s())},h);return function(e,t=(null==globalThis?void 0:globalThis.document)){const n=O8(e);wt.useEffect(()=>{const e=e=>{"Escape"===e.key&&n(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[n,t])}(e=>{v===c.layers.size-1&&(null==r||r(e),!e.defaultPrevented&&s&&(e.preventDefault(),s()))},h),wt.useEffect(()=>{if(u)return n&&(0===c.layersWithOutsidePointerEventsDisabled.size&&(T8=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),D8(),()=>{n&&1===c.layersWithOutsidePointerEventsDisabled.size&&(h.body.style.pointerEvents=T8)}},[u,h,n,c]),wt.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),D8())},[u,c]),wt.useEffect(()=>{const e=()=>f({});return document.addEventListener(A8,e),()=>document.removeEventListener(A8,e)},[]),Nt.jsx(yR.div,{...l,ref:p,style:{pointerEvents:b?w?"auto":"none":void 0,...e.style},onFocusCapture:x8(e.onFocusCapture,_.onFocusCapture),onBlurCapture:x8(e.onBlurCapture,_.onBlurCapture),onPointerDownCapture:x8(e.onPointerDownCapture,x.onPointerDownCapture)})});j8.displayName="DismissableLayer";function D8(){const e=new CustomEvent(A8);document.dispatchEvent(e)}function M8(e,t,n,{discrete:r}){const i=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?function(e,t){e&&Fh.flushSync(()=>e.dispatchEvent(t))}(i,a):i.dispatchEvent(a)}wt.forwardRef((e,t)=>{const n=wt.useContext(P8),r=wt.useRef(null),i=rR(t,r);return wt.useEffect(()=>{const e=r.current;if(e)return n.branches.add(e),()=>{n.branches.delete(e)}},[n.branches]),Nt.jsx(yR.div,{...e,ref:i})}).displayName="DismissableLayerBranch";var R8=0;function L8(){wt.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??F8()),document.body.insertAdjacentElement("beforeend",e[1]??F8()),R8++,()=>{1===R8&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),R8--}},[])}function F8(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var z8="focusScope.autoFocusOnMount",U8="focusScope.autoFocusOnUnmount",V8={bubbles:!1,cancelable:!0},$8=wt.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...o}=e,[s,l]=wt.useState(null),c=O8(i),u=O8(a),d=wt.useRef(null),h=rR(t,e=>l(e)),f=wt.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;wt.useEffect(()=>{if(r){let e=function(e){if(f.paused||!s)return;const t=e.target;s.contains(t)?d.current=t:K8(d.current,{select:!0})},t=function(e){if(f.paused||!s)return;const t=e.relatedTarget;null!==t&&(s.contains(t)||K8(d.current,{select:!0}))},n=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&K8(s)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const r=new MutationObserver(n);return s&&r.observe(s,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),r.disconnect()}}},[r,s,f.paused]),wt.useEffect(()=>{if(s){H8.add(f);const t=document.activeElement;if(!s.contains(t)){const n=new CustomEvent(z8,V8);s.addEventListener(z8,c),s.dispatchEvent(n),n.defaultPrevented||(!function(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(K8(r,{select:t}),document.activeElement!==n)return}((e=B8(s),e.filter(e=>"A"!==e.tagName)),{select:!0}),document.activeElement===t&&K8(s))}return()=>{s.removeEventListener(z8,c),setTimeout(()=>{const e=new CustomEvent(U8,V8);s.addEventListener(U8,u),s.dispatchEvent(e),e.defaultPrevented||K8(t??document.body,{select:!0}),s.removeEventListener(U8,u),H8.remove(f)},0)}}var e},[s,c,u,f]);const p=wt.useCallback(e=>{if(!n&&!r)return;if(f.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,i=document.activeElement;if(t&&i){const t=e.currentTarget,[r,a]=function(e){const t=B8(e),n=q8(t,e),r=q8(t.reverse(),e);return[n,r]}(t);r&&a?e.shiftKey||i!==a?e.shiftKey&&i===r&&(e.preventDefault(),n&&K8(a,{select:!0})):(e.preventDefault(),n&&K8(r,{select:!0})):i===t&&e.preventDefault()}},[n,r,f.paused]);return Nt.jsx(yR.div,{tabIndex:-1,...o,ref:h,onKeyDown:p})});function B8(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function q8(e,t){for(const n of e)if(!W8(n,{upTo:t}))return n}function W8(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==t&&e===t)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function K8(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}$8.displayName="FocusScope";var H8=function(){let e=[];return{add(t){const n=e[0];t!==n&&(null==n||n.pause()),e=G8(e,t),e.unshift(t)},remove(t){var n;e=G8(e,t),null==(n=e[0])||n.resume()}}}();function G8(e,t){const n=[...e],r=n.indexOf(t);return-1!==r&&n.splice(r,1),n}var Q8=(null==globalThis?void 0:globalThis.document)?wt.useLayoutEffect:()=>{},Y8=_t[" useId ".trim().toString()]||(()=>{}),Z8=0;function X8(e){const[t,n]=wt.useState(Y8());return Q8(()=>{n(e=>e??String(Z8++))},[e]),t?`radix-${t}`:""}const J8=["top","right","bottom","left"],eee=Math.min,tee=Math.max,nee=Math.round,ree=Math.floor,iee=e=>({x:e,y:e}),aee={left:"right",right:"left",bottom:"top",top:"bottom"},oee={start:"end",end:"start"};function see(e,t,n){return tee(e,eee(t,n))}function lee(e,t){return"function"==typeof e?e(t):e}function cee(e){return e.split("-")[0]}function uee(e){return e.split("-")[1]}function dee(e){return"x"===e?"y":"x"}function hee(e){return"y"===e?"height":"width"}const fee=new Set(["top","bottom"]);function pee(e){return fee.has(cee(e))?"y":"x"}function mee(e){return dee(pee(e))}function gee(e){return e.replace(/start|end/g,e=>oee[e])}const yee=["left","right"],vee=["right","left"],bee=["top","bottom"],wee=["bottom","top"];function xee(e,t,n,r){const i=uee(e);let a=function(e,t,n){switch(e){case"top":case"bottom":return n?t?vee:yee:t?yee:vee;case"left":case"right":return t?bee:wee;default:return[]}}(cee(e),"start"===n,r);return i&&(a=a.map(e=>e+"-"+i),t&&(a=a.concat(a.map(gee)))),a}function _ee(e){return e.replace(/left|right|bottom|top/g,e=>aee[e])}function Eee(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function See(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function kee(e,t,n){let{reference:r,floating:i}=e;const a=pee(t),o=mee(t),s=hee(o),l=cee(t),c="y"===a,u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,h=r[s]/2-i[s]/2;let f;switch(l){case"top":f={x:u,y:r.y-i.height};break;case"bottom":f={x:u,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:d};break;case"left":f={x:r.x-i.width,y:d};break;default:f={x:r.x,y:r.y}}switch(uee(t)){case"start":f[o]-=h*(n&&c?-1:1);break;case"end":f[o]+=h*(n&&c?-1:1)}return f}async function Cee(e,t){var n;void 0===t&&(t={});const{x:r,y:i,platform:a,rects:o,elements:s,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=lee(t,e),p=Eee(f),m=s[h?"floating"===d?"reference":"floating":d],g=See(await a.getClippingRect({element:null==(n=await(null==a.isElement?void 0:a.isElement(m)))||n?m:m.contextElement||await(null==a.getDocumentElement?void 0:a.getDocumentElement(s.floating)),boundary:c,rootBoundary:u,strategy:l})),y="floating"===d?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,v=await(null==a.getOffsetParent?void 0:a.getOffsetParent(s.floating)),b=await(null==a.isElement?void 0:a.isElement(v))&&await(null==a.getScale?void 0:a.getScale(v))||{x:1,y:1},w=See(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:y,offsetParent:v,strategy:l}):y);return{top:(g.top-w.top+p.top)/b.y,bottom:(w.bottom-g.bottom+p.bottom)/b.y,left:(g.left-w.left+p.left)/b.x,right:(w.right-g.right+p.right)/b.x}}function Oee(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Tee(e){return J8.some(t=>e[t]>=0)}const Aee=new Set(["left","top"]);function Nee(){return"undefined"!=typeof window}function Iee(e){return Dee(e)?(e.nodeName||"").toLowerCase():"#document"}function Pee(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function jee(e){var t;return null==(t=(Dee(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function Dee(e){return!!Nee()&&(e instanceof Node||e instanceof Pee(e).Node)}function Mee(e){return!!Nee()&&(e instanceof Element||e instanceof Pee(e).Element)}function Ree(e){return!!Nee()&&(e instanceof HTMLElement||e instanceof Pee(e).HTMLElement)}function Lee(e){return!(!Nee()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof Pee(e).ShadowRoot)}const Fee=new Set(["inline","contents"]);function zee(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Zee(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!Fee.has(i)}const Uee=new Set(["table","td","th"]);function Vee(e){return Uee.has(Iee(e))}const $ee=[":popover-open",":modal"];function Bee(e){return $ee.some(t=>{try{return e.matches(t)}catch(n){return!1}})}const qee=["transform","translate","scale","rotate","perspective"],Wee=["transform","translate","scale","rotate","perspective","filter"],Kee=["paint","layout","strict","content"];function Hee(e){const t=Gee(),n=Mee(e)?Zee(e):e;return qee.some(e=>!!n[e]&&"none"!==n[e])||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||Wee.some(e=>(n.willChange||"").includes(e))||Kee.some(e=>(n.contain||"").includes(e))}function Gee(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const Qee=new Set(["html","body","#document"]);function Yee(e){return Qee.has(Iee(e))}function Zee(e){return Pee(e).getComputedStyle(e)}function Xee(e){return Mee(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Jee(e){if("html"===Iee(e))return e;const t=e.assignedSlot||e.parentNode||Lee(e)&&e.host||jee(e);return Lee(t)?t.host:t}function ete(e){const t=Jee(e);return Yee(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ree(t)&&zee(t)?t:ete(t)}function tte(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const i=ete(e),a=i===(null==(r=e.ownerDocument)?void 0:r.body),o=Pee(i);if(a){const e=nte(o);return t.concat(o,o.visualViewport||[],zee(i)?i:[],e&&n?tte(e):[])}return t.concat(i,tte(i,[],n))}function nte(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function rte(e){const t=Zee(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Ree(e),a=i?e.offsetWidth:n,o=i?e.offsetHeight:r,s=nee(n)!==a||nee(r)!==o;return s&&(n=a,r=o),{width:n,height:r,$:s}}function ite(e){return Mee(e)?e:e.contextElement}function ate(e){const t=ite(e);if(!Ree(t))return iee(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:a}=rte(t);let o=(a?nee(n.width):n.width)/r,s=(a?nee(n.height):n.height)/i;return o&&Number.isFinite(o)||(o=1),s&&Number.isFinite(s)||(s=1),{x:o,y:s}}const ote=iee(0);function ste(e){const t=Pee(e);return Gee()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:ote}function lte(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const i=e.getBoundingClientRect(),a=ite(e);let o=iee(1);t&&(r?Mee(r)&&(o=ate(r)):o=ate(e));const s=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==Pee(e))&&t}(a,n,r)?ste(a):iee(0);let l=(i.left+s.x)/o.x,c=(i.top+s.y)/o.y,u=i.width/o.x,d=i.height/o.y;if(a){const e=Pee(a),t=r&&Mee(r)?Pee(r):r;let n=e,i=nte(n);for(;i&&r&&t!==n;){const e=ate(i),t=i.getBoundingClientRect(),r=Zee(i),a=t.left+(i.clientLeft+parseFloat(r.paddingLeft))*e.x,o=t.top+(i.clientTop+parseFloat(r.paddingTop))*e.y;l*=e.x,c*=e.y,u*=e.x,d*=e.y,l+=a,c+=o,n=Pee(i),i=nte(n)}}return See({width:u,height:d,x:l,y:c})}function cte(e,t){const n=Xee(e).scrollLeft;return t?t.left+n:lte(jee(e)).left+n}function ute(e,t){const n=e.getBoundingClientRect();return{x:n.left+t.scrollLeft-cte(e,n),y:n.top+t.scrollTop}}const dte=new Set(["absolute","fixed"]);function hte(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=Pee(e),r=jee(e),i=n.visualViewport;let a=r.clientWidth,o=r.clientHeight,s=0,l=0;if(i){a=i.width,o=i.height;const e=Gee();(!e||e&&"fixed"===t)&&(s=i.offsetLeft,l=i.offsetTop)}const c=cte(r);if(c<=0){const e=r.ownerDocument,t=e.body,n=getComputedStyle(t),i="CSS1Compat"===e.compatMode&&parseFloat(n.marginLeft)+parseFloat(n.marginRight)||0,o=Math.abs(r.clientWidth-t.clientWidth-i);o<=25&&(a-=o)}else c<=25&&(a+=c);return{width:a,height:o,x:s,y:l}}(e,n);else if("document"===t)r=function(e){const t=jee(e),n=Xee(e),r=e.ownerDocument.body,i=tee(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=tee(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+cte(e);const s=-n.scrollTop;return"rtl"===Zee(r).direction&&(o+=tee(t.clientWidth,r.clientWidth)-i),{width:i,height:a,x:o,y:s}}(jee(e));else if(Mee(t))r=function(e,t){const n=lte(e,!0,"fixed"===t),r=n.top+e.clientTop,i=n.left+e.clientLeft,a=Ree(e)?ate(e):iee(1);return{width:e.clientWidth*a.x,height:e.clientHeight*a.y,x:i*a.x,y:r*a.y}}(t,n);else{const n=ste(e);r={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return See(r)}function fte(e,t){const n=Jee(e);return!(n===t||!Mee(n)||Yee(n))&&("fixed"===Zee(n).position||fte(n,t))}function pte(e,t,n){const r=Ree(t),i=jee(t),a="fixed"===n,o=lte(e,!0,a,t);let s={scrollLeft:0,scrollTop:0};const l=iee(0);function c(){l.x=cte(i)}if(r||!r&&!a)if(("body"!==Iee(t)||zee(i))&&(s=Xee(t)),r){const e=lte(t,!0,a,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else i&&c();a&&!r&&i&&c();const u=!i||r||a?iee(0):ute(i,s);return{x:o.left+s.scrollLeft-l.x-u.x,y:o.top+s.scrollTop-l.y-u.y,width:o.width,height:o.height}}function mte(e){return"static"===Zee(e).position}function gte(e,t){if(!Ree(e)||"fixed"===Zee(e).position)return null;if(t)return t(e);let n=e.offsetParent;return jee(e)===n&&(n=n.ownerDocument.body),n}function yte(e,t){const n=Pee(e);if(Bee(e))return n;if(!Ree(e)){let t=Jee(e);for(;t&&!Yee(t);){if(Mee(t)&&!mte(t))return t;t=Jee(t)}return n}let r=gte(e,t);for(;r&&Vee(r)&&mte(r);)r=gte(r,t);return r&&Yee(r)&&mte(r)&&!Hee(r)?n:r||function(e){let t=Jee(e);for(;Ree(t)&&!Yee(t);){if(Hee(t))return t;if(Bee(t))return null;t=Jee(t)}return null}(e)||n}const vte={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const a="fixed"===i,o=jee(r),s=!!t&&Bee(t.floating);if(r===o||s&&a)return n;let l={scrollLeft:0,scrollTop:0},c=iee(1);const u=iee(0),d=Ree(r);if((d||!d&&!a)&&(("body"!==Iee(r)||zee(o))&&(l=Xee(r)),Ree(r))){const e=lte(r);c=ate(r),u.x=e.x+r.clientLeft,u.y=e.y+r.clientTop}const h=!o||d||a?iee(0):ute(o,l);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:n.y*c.y-l.scrollTop*c.y+u.y+h.y}},getDocumentElement:jee,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const a=[..."clippingAncestors"===n?Bee(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let r=tte(e,[],!1).filter(e=>Mee(e)&&"body"!==Iee(e)),i=null;const a="fixed"===Zee(e).position;let o=a?Jee(e):e;for(;Mee(o)&&!Yee(o);){const t=Zee(o),n=Hee(o);n||"fixed"!==t.position||(i=null),(a?!n&&!i:!n&&"static"===t.position&&i&&dte.has(i.position)||zee(o)&&!n&&fte(e,o))?r=r.filter(e=>e!==o):i=t,o=Jee(o)}return t.set(e,r),r}(t,this._c):[].concat(n),r],o=a[0],s=a.reduce((e,n)=>{const r=hte(t,n,i);return e.top=tee(r.top,e.top),e.right=eee(r.right,e.right),e.bottom=eee(r.bottom,e.bottom),e.left=tee(r.left,e.left),e},hte(t,o,i));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}},getOffsetParent:yte,getElementRects:async function(e){const t=this.getOffsetParent||yte,n=this.getDimensions,r=await n(e.floating);return{reference:pte(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=rte(e);return{width:t,height:n}},getScale:ate,isElement:Mee,isRTL:function(e){return"rtl"===Zee(e).direction}};function bte(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function wte(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o="function"==typeof ResizeObserver,layoutShift:s="function"==typeof IntersectionObserver,animationFrame:l=!1}=r,c=ite(e),u=i||a?[...c?tte(c):[],...tte(t)]:[];u.forEach(e=>{i&&e.addEventListener("scroll",n,{passive:!0}),a&&e.addEventListener("resize",n)});const d=c&&s?function(e,t){let n,r=null;const i=jee(e);function a(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function o(s,l){void 0===s&&(s=!1),void 0===l&&(l=1),a();const c=e.getBoundingClientRect(),{left:u,top:d,width:h,height:f}=c;if(s||t(),!h||!f)return;const p={rootMargin:-ree(d)+"px "+-ree(i.clientWidth-(u+h))+"px "+-ree(i.clientHeight-(d+f))+"px "+-ree(u)+"px",threshold:tee(0,eee(1,l))||1};let m=!0;function g(t){const r=t[0].intersectionRatio;if(r!==l){if(!m)return o();r?o(!1,r):n=setTimeout(()=>{o(!1,1e-7)},1e3)}1!==r||bte(c,e.getBoundingClientRect())||o(),m=!1}try{r=new IntersectionObserver(g,{...p,root:i.ownerDocument})}catch(y){r=new IntersectionObserver(g,p)}r.observe(e)}(!0),a}(c,n):null;let h,f=-1,p=null;o&&(p=new ResizeObserver(e=>{let[r]=e;r&&r.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var e;null==(e=p)||e.observe(t)})),n()}),c&&!l&&p.observe(c),p.observe(t));let m=l?lte(e):null;return l&&function t(){const r=lte(e);m&&!bte(m,r)&&n();m=r,h=requestAnimationFrame(t)}(),n(),()=>{var e;u.forEach(e=>{i&&e.removeEventListener("scroll",n),a&&e.removeEventListener("resize",n)}),null==d||d(),null==(e=p)||e.disconnect(),p=null,l&&cancelAnimationFrame(h)}}const xte=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:a,placement:o,middlewareData:s}=t,l=await async function(e,t){const{placement:n,platform:r,elements:i}=e,a=await(null==r.isRTL?void 0:r.isRTL(i.floating)),o=cee(n),s=uee(n),l="y"===pee(n),c=Aee.has(o)?-1:1,u=a&&l?-1:1,d=lee(t,e);let{mainAxis:h,crossAxis:f,alignmentAxis:p}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return s&&"number"==typeof p&&(f="end"===s?-1*p:p),l?{x:f*u,y:h*c}:{x:h*c,y:f*u}}(t,e);return o===(null==(n=s.offset)?void 0:n.placement)&&null!=(r=s.arrow)&&r.alignmentOffset?{}:{x:i+l.x,y:a+l.y,data:{...l,placement:o}}}}},_te=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:a=!0,crossAxis:o=!1,limiter:s={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...l}=lee(e,t),c={x:n,y:r},u=await Cee(t,l),d=pee(cee(i)),h=dee(d);let f=c[h],p=c[d];if(a){const e="y"===h?"bottom":"right";f=see(f+u["y"===h?"top":"left"],f,f-u[e])}if(o){const e="y"===d?"bottom":"right";p=see(p+u["y"===d?"top":"left"],p,p-u[e])}const m=s.fn({...t,[h]:f,[d]:p});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[h]:a,[d]:o}}}}}},Ete=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:a,rects:o,initialPlacement:s,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=lee(e,t);if(null!=(n=a.arrow)&&n.alignmentOffset)return{};const y=cee(i),v=pee(s),b=cee(s)===s,w=await(null==l.isRTL?void 0:l.isRTL(c.floating)),x=h||(b||!m?[_ee(s)]:function(e){const t=_ee(e);return[gee(e),t,gee(t)]}(s)),_="none"!==p;!h&&_&&x.push(...xee(s,m,p,w));const E=[s,...x],S=await Cee(t,g),k=[];let C=(null==(r=a.flip)?void 0:r.overflows)||[];if(u&&k.push(S[y]),d){const e=function(e,t,n){void 0===n&&(n=!1);const r=uee(e),i=mee(e),a=hee(i);let o="x"===i?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[a]>t.floating[a]&&(o=_ee(o)),[o,_ee(o)]}(i,o,w);k.push(S[e[0]],S[e[1]])}if(C=[...C,{placement:i,overflows:k}],!k.every(e=>e<=0)){var O,T;const e=((null==(O=a.flip)?void 0:O.index)||0)+1,t=E[e];if(t){if(!("alignment"===d&&v!==pee(t))||C.every(e=>pee(e.placement)!==v||e.overflows[0]>0))return{data:{index:e,overflows:C},reset:{placement:t}}}let n=null==(T=C.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:T.placement;if(!n)switch(f){case"bestFit":{var A;const e=null==(A=C.filter(e=>{if(_){const t=pee(e.placement);return t===v||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:A[0];e&&(n=e);break}case"initialPlacement":n=s}if(i!==n)return{reset:{placement:n}}}return{}}}},Ste=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:a,platform:o,elements:s}=t,{apply:l=()=>{},...c}=lee(e,t),u=await Cee(t,c),d=cee(i),h=uee(i),f="y"===pee(i),{width:p,height:m}=a.floating;let g,y;"top"===d||"bottom"===d?(g=d,y=h===(await(null==o.isRTL?void 0:o.isRTL(s.floating))?"start":"end")?"left":"right"):(y=d,g="end"===h?"top":"bottom");const v=m-u.top-u.bottom,b=p-u.left-u.right,w=eee(m-u[g],v),x=eee(p-u[y],b),_=!t.middlewareData.shift;let E=w,S=x;if(null!=(n=t.middlewareData.shift)&&n.enabled.x&&(S=b),null!=(r=t.middlewareData.shift)&&r.enabled.y&&(E=v),_&&!h){const e=tee(u.left,0),t=tee(u.right,0),n=tee(u.top,0),r=tee(u.bottom,0);f?S=p-2*(0!==e||0!==t?e+t:tee(u.left,u.right)):E=m-2*(0!==n||0!==r?n+r:tee(u.top,u.bottom))}await l({...t,availableWidth:S,availableHeight:E});const k=await o.getDimensions(s.floating);return p!==k.width||m!==k.height?{reset:{rects:!0}}:{}}}},kte=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...i}=lee(e,t);switch(r){case"referenceHidden":{const e=Oee(await Cee(t,{...i,elementContext:"reference"}),n.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:Tee(e)}}}case"escaped":{const e=Oee(await Cee(t,{...i,altBoundary:!0}),n.floating);return{data:{escapedOffsets:e,escaped:Tee(e)}}}default:return{}}}}},Cte=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:a,platform:o,elements:s,middlewareData:l}=t,{element:c,padding:u=0}=lee(e,t)||{};if(null==c)return{};const d=Eee(u),h={x:n,y:r},f=mee(i),p=hee(f),m=await o.getDimensions(c),g="y"===f,y=g?"top":"left",v=g?"bottom":"right",b=g?"clientHeight":"clientWidth",w=a.reference[p]+a.reference[f]-h[f]-a.floating[p],x=h[f]-a.reference[f],_=await(null==o.getOffsetParent?void 0:o.getOffsetParent(c));let E=_?_[b]:0;E&&await(null==o.isElement?void 0:o.isElement(_))||(E=s.floating[b]||a.floating[p]);const S=w/2-x/2,k=E/2-m[p]/2-1,C=eee(d[y],k),O=eee(d[v],k),T=C,A=E-m[p]-O,N=E/2-m[p]/2+S,I=see(T,N,A),P=!l.arrow&&null!=uee(i)&&N!==I&&a.reference[p]/2-(N<T?C:O)-m[p]/2<0,j=P?N<T?N-T:N-A:0;return{[f]:h[f]+j,data:{[f]:I,centerOffset:N-I-j,...P&&{alignmentOffset:j}},reset:P}}}),Ote=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:a,middlewareData:o}=t,{offset:s=0,mainAxis:l=!0,crossAxis:c=!0}=lee(e,t),u={x:n,y:r},d=pee(i),h=dee(d);let f=u[h],p=u[d];const m=lee(s,t),g="number"==typeof m?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const e="y"===h?"height":"width",t=a.reference[h]-a.floating[e]+g.mainAxis,n=a.reference[h]+a.reference[e]-g.mainAxis;f<t?f=t:f>n&&(f=n)}if(c){var y,v;const e="y"===h?"width":"height",t=Aee.has(cee(i)),n=a.reference[d]-a.floating[e]+(t&&(null==(y=o.offset)?void 0:y[d])||0)+(t?0:g.crossAxis),r=a.reference[d]+a.reference[e]+(t?0:(null==(v=o.offset)?void 0:v[d])||0)-(t?g.crossAxis:0);p<n?p=n:p>r&&(p=r)}return{[h]:f,[d]:p}}}},Tte=(e,t,n)=>{const r=new Map,i={platform:vte,...n},a={...i.platform,_c:r};return(async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:a=[],platform:o}=n,s=a.filter(Boolean),l=await(null==o.isRTL?void 0:o.isRTL(t));let c=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:d}=kee(c,r,l),h=r,f={},p=0;for(let m=0;m<s.length;m++){const{name:n,fn:a}=s[m],{x:g,y:y,data:v,reset:b}=await a({x:u,y:d,initialPlacement:r,placement:h,strategy:i,middlewareData:f,rects:c,platform:o,elements:{reference:e,floating:t}});u=null!=g?g:u,d=null!=y?y:d,f={...f,[n]:{...f[n],...v}},b&&p<=50&&(p++,"object"==typeof b&&(b.placement&&(h=b.placement),b.rects&&(c=!0===b.rects?await o.getElementRects({reference:e,floating:t,strategy:i}):b.rects),({x:u,y:d}=kee(c,h,l))),m=-1)}return{x:u,y:d,placement:h,strategy:i,middlewareData:f}})(e,t,{...i,platform:a})};var Ate="undefined"!=typeof document?wt.useLayoutEffect:function(){};function Nte(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;0!==r--;)if(!Nte(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;0!==r--;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;0!==r--;){const n=i[r];if(("_owner"!==n||!e.$$typeof)&&!Nte(e[n],t[n]))return!1}return!0}return e!=e&&t!=t}function Ite(e){if("undefined"==typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Pte(e,t){const n=Ite(e);return Math.round(t*n)/n}function jte(e){const t=wt.useRef(e);return Ate(()=>{t.current=e}),t}const Dte=e=>({name:"arrow",options:e,fn(t){const{element:n,padding:r}="function"==typeof e?e(t):e;return n&&(i=n,{}.hasOwnProperty.call(i,"current"))?null!=n.current?Cte({element:n.current,padding:r}).fn(t):{}:n?Cte({element:n,padding:r}).fn(t):{};var i}}),Mte=(e,t)=>({...xte(e),options:[e,t]}),Rte=(e,t)=>({..._te(e),options:[e,t]}),Lte=(e,t)=>({...Ote(e),options:[e,t]}),Fte=(e,t)=>({...Ete(e),options:[e,t]}),zte=(e,t)=>({...Ste(e),options:[e,t]}),Ute=(e,t)=>({...kte(e),options:[e,t]}),Vte=(e,t)=>({...Dte(e),options:[e,t]});var $te=wt.forwardRef((e,t)=>{const{children:n,width:r=10,height:i=5,...a}=e;return Nt.jsx(yR.svg,{...a,ref:t,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:Nt.jsx("polygon",{points:"0,0 30,0 15,10"})})});$te.displayName="Arrow";var Bte=$te;var qte="Popper",[Wte,Kte]=_8(qte),[Hte,Gte]=Wte(qte),Qte=e=>{const{__scopePopper:t,children:n}=e,[r,i]=wt.useState(null);return Nt.jsx(Hte,{scope:t,anchor:r,onAnchorChange:i,children:n})};Qte.displayName=qte;var Yte="PopperAnchor",Zte=wt.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...i}=e,a=Gte(Yte,n),o=wt.useRef(null),s=rR(t,o),l=wt.useRef(null);return wt.useEffect(()=>{const e=l.current;l.current=(null==r?void 0:r.current)||o.current,e!==l.current&&a.onAnchorChange(l.current)}),r?null:Nt.jsx(yR.div,{...i,ref:s})});Zte.displayName=Yte;var Xte="PopperContent",[Jte,ene]=Wte(Xte),tne=wt.forwardRef((e,t)=>{var n,r,i,a,o,s;const{__scopePopper:l,side:c="bottom",sideOffset:u=0,align:d="center",alignOffset:h=0,arrowPadding:f=0,avoidCollisions:p=!0,collisionBoundary:m=[],collisionPadding:g=0,sticky:y="partial",hideWhenDetached:v=!1,updatePositionStrategy:b="optimized",onPlaced:w,...x}=e,_=Gte(Xte,l),[E,S]=wt.useState(null),k=rR(t,e=>S(e)),[C,O]=wt.useState(null),T=function(e){const[t,n]=wt.useState(void 0);return Q8(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const t=new ResizeObserver(t=>{if(!Array.isArray(t))return;if(!t.length)return;const r=t[0];let i,a;if("borderBoxSize"in r){const e=r.borderBoxSize,t=Array.isArray(e)?e[0]:e;i=t.inlineSize,a=t.blockSize}else i=e.offsetWidth,a=e.offsetHeight;n({width:i,height:a})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}n(void 0)},[e]),t}(C),A=(null==T?void 0:T.width)??0,N=(null==T?void 0:T.height)??0,I=c+("center"!==d?"-"+d:""),P="number"==typeof g?g:{top:0,right:0,bottom:0,left:0,...g},j=Array.isArray(m)?m:[m],D=j.length>0,M={padding:P,boundary:j.filter(ane),altBoundary:D},{refs:R,floatingStyles:L,placement:F,isPositioned:z,middlewareData:U}=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:a,floating:o}={},transform:s=!0,whileElementsMounted:l,open:c}=e,[u,d]=wt.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,f]=wt.useState(r);Nte(h,r)||f(r);const[p,m]=wt.useState(null),[g,y]=wt.useState(null),v=wt.useCallback(e=>{e!==_.current&&(_.current=e,m(e))},[]),b=wt.useCallback(e=>{e!==E.current&&(E.current=e,y(e))},[]),w=a||p,x=o||g,_=wt.useRef(null),E=wt.useRef(null),S=wt.useRef(u),k=null!=l,C=jte(l),O=jte(i),T=jte(c),A=wt.useCallback(()=>{if(!_.current||!E.current)return;const e={placement:t,strategy:n,middleware:h};O.current&&(e.platform=O.current),Tte(_.current,E.current,e).then(e=>{const t={...e,isPositioned:!1!==T.current};N.current&&!Nte(S.current,t)&&(S.current=t,Fh.flushSync(()=>{d(t)}))})},[h,t,n,O,T]);Ate(()=>{!1===c&&S.current.isPositioned&&(S.current.isPositioned=!1,d(e=>({...e,isPositioned:!1})))},[c]);const N=wt.useRef(!1);Ate(()=>(N.current=!0,()=>{N.current=!1}),[]),Ate(()=>{if(w&&(_.current=w),x&&(E.current=x),w&&x){if(C.current)return C.current(w,x,A);A()}},[w,x,A,C,k]);const I=wt.useMemo(()=>({reference:_,floating:E,setReference:v,setFloating:b}),[v,b]),P=wt.useMemo(()=>({reference:w,floating:x}),[w,x]),j=wt.useMemo(()=>{const e={position:n,left:0,top:0};if(!P.floating)return e;const t=Pte(P.floating,u.x),r=Pte(P.floating,u.y);return s?{...e,transform:"translate("+t+"px, "+r+"px)",...Ite(P.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:t,top:r}},[n,s,P.floating,u.x,u.y]);return wt.useMemo(()=>({...u,update:A,refs:I,elements:P,floatingStyles:j}),[u,A,I,P,j])}({strategy:"fixed",placement:I,whileElementsMounted:(...e)=>wte(...e,{animationFrame:"always"===b}),elements:{reference:_.anchor},middleware:[Mte({mainAxis:u+N,alignmentAxis:h}),p&&Rte({mainAxis:!0,crossAxis:!1,limiter:"partial"===y?Lte():void 0,...M}),p&&Fte({...M}),zte({...M,apply:({elements:e,rects:t,availableWidth:n,availableHeight:r})=>{const{width:i,height:a}=t.reference,o=e.floating.style;o.setProperty("--radix-popper-available-width",`${n}px`),o.setProperty("--radix-popper-available-height",`${r}px`),o.setProperty("--radix-popper-anchor-width",`${i}px`),o.setProperty("--radix-popper-anchor-height",`${a}px`)}}),C&&Vte({element:C,padding:f}),one({arrowWidth:A,arrowHeight:N}),v&&Ute({strategy:"referenceHidden",...M})]}),[V,$]=sne(F),B=O8(w);Q8(()=>{z&&(null==B||B())},[z,B]);const q=null==(n=U.arrow)?void 0:n.x,W=null==(r=U.arrow)?void 0:r.y,K=0!==(null==(i=U.arrow)?void 0:i.centerOffset),[H,G]=wt.useState();return Q8(()=>{E&&G(window.getComputedStyle(E).zIndex)},[E]),Nt.jsx("div",{ref:R.setFloating,"data-radix-popper-content-wrapper":"",style:{...L,transform:z?L.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:H,"--radix-popper-transform-origin":[null==(a=U.transformOrigin)?void 0:a.x,null==(o=U.transformOrigin)?void 0:o.y].join(" "),...(null==(s=U.hide)?void 0:s.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:Nt.jsx(Jte,{scope:l,placedSide:V,onArrowChange:O,arrowX:q,arrowY:W,shouldHideArrow:K,children:Nt.jsx(yR.div,{"data-side":V,"data-align":$,...x,ref:k,style:{...x.style,animation:z?void 0:"none"}})})})});tne.displayName=Xte;var nne="PopperArrow",rne={top:"bottom",right:"left",bottom:"top",left:"right"},ine=wt.forwardRef(function(e,t){const{__scopePopper:n,...r}=e,i=ene(nne,n),a=rne[i.placedSide];return Nt.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:Nt.jsx(Bte,{...r,ref:t,style:{...r.style,display:"block"}})})});function ane(e){return null!==e}ine.displayName=nne;var one=e=>({name:"transformOrigin",options:e,fn(t){var n,r,i;const{placement:a,rects:o,middlewareData:s}=t,l=0!==(null==(n=s.arrow)?void 0:n.centerOffset),c=l?0:e.arrowWidth,u=l?0:e.arrowHeight,[d,h]=sne(a),f={start:"0%",center:"50%",end:"100%"}[h],p=((null==(r=s.arrow)?void 0:r.x)??0)+c/2,m=((null==(i=s.arrow)?void 0:i.y)??0)+u/2;let g="",y="";return"bottom"===d?(g=l?f:`${p}px`,y=-u+"px"):"top"===d?(g=l?f:`${p}px`,y=`${o.floating.height+u}px`):"right"===d?(g=-u+"px",y=l?f:`${m}px`):"left"===d&&(g=`${o.floating.width+u}px`,y=l?f:`${m}px`),{data:{x:g,y:y}}}});function sne(e){const[t,n="center"]=e.split("-");return[t,n]}var lne=Qte,cne=Zte,une=tne,dne=ine,hne=wt.forwardRef((e,t)=>{var n;const{container:r,...i}=e,[a,o]=wt.useState(!1);Q8(()=>o(!0),[]);const s=r||a&&(null==(n=null==globalThis?void 0:globalThis.document)?void 0:n.body);return s?zh.createPortal(Nt.jsx(yR.div,{...i,ref:t}),s):null});hne.displayName="Portal";var fne=_t[" useInsertionEffect ".trim().toString()]||Q8;function pne({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[i,a,o]=function({defaultProp:e,onChange:t}){const[n,r]=wt.useState(e),i=wt.useRef(n),a=wt.useRef(t);return fne(()=>{a.current=t},[t]),wt.useEffect(()=>{var e;i.current!==n&&(null==(e=a.current)||e.call(a,n),i.current=n)},[n,i]),[n,r,a]}({defaultProp:t,onChange:n}),s=void 0!==e,l=s?e:i;{const t=wt.useRef(void 0!==e);wt.useEffect(()=>{const e=t.current;if(e!==s){const t=e?"controlled":"uncontrolled",n=s?"controlled":"uncontrolled";console.warn(`${r} is changing from ${t} to ${n}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}t.current=s},[s,r])}const c=wt.useCallback(t=>{var n;if(s){const r=function(e){return"function"==typeof e}(t)?t(e):t;r!==e&&(null==(n=o.current)||n.call(o,r))}else a(t)},[s,e,a,o]);return[l,c]}var mne=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"});wt.forwardRef((e,t)=>Nt.jsx(yR.span,{...e,ref:t,style:{...mne,...e.style}})).displayName="VisuallyHidden";var gne=new WeakMap,yne=new WeakMap,vne={},bne=0,wne=function(e){return e&&(e.host||wne(e.parentNode))},xne=function(e,t,n,r){var i=function(e,t){return t.map(function(t){if(e.contains(t))return t;var n=wne(t);return n&&e.contains(n)?n:(console.error("aria-hidden",t,"in not contained inside",e,". Doing nothing"),null)}).filter(function(e){return Boolean(e)})}(t,Array.isArray(e)?e:[e]);vne[n]||(vne[n]=new WeakMap);var a=vne[n],o=[],s=new Set,l=new Set(i),c=function(e){e&&!s.has(e)&&(s.add(e),c(e.parentNode))};i.forEach(c);var u=function(e){e&&!l.has(e)&&Array.prototype.forEach.call(e.children,function(e){if(s.has(e))u(e);else try{var t=e.getAttribute(r),i=null!==t&&"false"!==t,l=(gne.get(e)||0)+1,c=(a.get(e)||0)+1;gne.set(e,l),a.set(e,c),o.push(e),1===l&&i&&yne.set(e,!0),1===c&&e.setAttribute(n,"true"),i||e.setAttribute(r,"true")}catch(vL){console.error("aria-hidden: cannot operate on ",e,vL)}})};return u(t),s.clear(),bne++,function(){o.forEach(function(e){var t=gne.get(e)-1,i=a.get(e)-1;gne.set(e,t),a.set(e,i),t||(yne.has(e)||e.removeAttribute(r),yne.delete(e)),i||e.removeAttribute(n)}),--bne||(gne=new WeakMap,gne=new WeakMap,yne=new WeakMap,vne={})}},_ne=function(e,t,n){void 0===n&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=function(e){return"undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body}(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),xne(r,i,n,"aria-hidden")):function(){return null}},Ene=function(){return Ene=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ene.apply(this,arguments)};function Sne(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}"function"==typeof SuppressedError&&SuppressedError;var kne="right-scroll-bar-position",Cne="width-before-scroll-bar";function One(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var Tne="undefined"!=typeof window?wt.useLayoutEffect:wt.useEffect,Ane=new WeakMap;function Nne(e,t){var n=function(e,t){var n=wt.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(e){var t=n.value;t!==e&&(n.value=e,n.callback(e,t))}}}})[0];return n.callback=t,n.facade}(null,function(t){return e.forEach(function(e){return One(e,t)})});return Tne(function(){var t=Ane.get(n);if(t){var r=new Set(t),i=new Set(e),a=n.current;r.forEach(function(e){i.has(e)||One(e,null)}),i.forEach(function(e){r.has(e)||One(e,a)})}Ane.set(n,e)},[e]),n}function Ine(e){return e}var Pne=function(e){var t=e.sideCar,n=Sne(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return wt.createElement(r,Ene({},n))};Pne.isSideCarExport=!0;var jne=function(e){void 0===e&&(e={});var t=function(e,t){void 0===t&&(t=Ine);var n=[],r=!1;return{read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(e){var i=t(e,r);return n.push(i),function(){n=n.filter(function(e){return e!==i})}},assignSyncMedium:function(e){for(r=!0;n.length;){var t=n;n=[],t.forEach(e)}n={push:function(t){return e(t)},filter:function(){return n}}},assignMedium:function(e){r=!0;var t=[];if(n.length){var i=n;n=[],i.forEach(e),t=n}var a=function(){var n=t;t=[],n.forEach(e)},o=function(){return Promise.resolve().then(a)};o(),n={push:function(e){t.push(e),o()},filter:function(e){return t=t.filter(e),n}}}}}(null);return t.options=Ene({async:!0,ssr:!1},e),t}(),Dne=function(){},Mne=wt.forwardRef(function(e,t){var n=wt.useRef(null),r=wt.useState({onScrollCapture:Dne,onWheelCapture:Dne,onTouchMoveCapture:Dne}),i=r[0],a=r[1],o=e.forwardProps,s=e.children,l=e.className,c=e.removeScrollBar,u=e.enabled,d=e.shards,h=e.sideCar,f=e.noRelative,p=e.noIsolation,m=e.inert,g=e.allowPinchZoom,y=e.as,v=void 0===y?"div":y,b=e.gapMode,w=Sne(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),x=h,_=Nne([n,t]),E=Ene(Ene({},w),i);return wt.createElement(wt.Fragment,null,u&&wt.createElement(x,{sideCar:jne,removeScrollBar:c,shards:d,noRelative:f,noIsolation:p,inert:m,setCallbacks:a,allowPinchZoom:!!g,lockRef:n,gapMode:b}),o?wt.cloneElement(wt.Children.only(s),Ene(Ene({},E),{ref:_})):wt.createElement(v,Ene({},E,{className:l,ref:_}),s))});Mne.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},Mne.classNames={fullWidth:Cne,zeroRight:kne};function Rne(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=function(){if("undefined"!=typeof __webpack_nonce__)return __webpack_nonce__}();return t&&e.setAttribute("nonce",t),e}var Lne=function(){var e=0,t=null;return{add:function(n){var r,i;0==e&&(t=Rne())&&(i=n,(r=t).styleSheet?r.styleSheet.cssText=i:r.appendChild(document.createTextNode(i)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Fne=function(){var e,t=(e=Lne(),function(t,n){wt.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])});return function(e){var n=e.styles,r=e.dynamic;return t(n,r),null}},zne={left:0,top:0,right:0,gap:0},Une=function(e){return parseInt(e||"",10)||0},Vne=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return zne;var t=function(e){var t=window.getComputedStyle(document.body),n=t["padding"===e?"paddingLeft":"marginLeft"],r=t["padding"===e?"paddingTop":"marginTop"],i=t["padding"===e?"paddingRight":"marginRight"];return[Une(n),Une(r),Une(i)]}(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},$ne=Fne(),Bne="data-scroll-locked",qne=function(e,t,n,r){var i=e.left,a=e.top,o=e.right,s=e.gap;return void 0===n&&(n="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(r,";\n   padding-right: ").concat(s,"px ").concat(r,";\n  }\n  body[").concat(Bne,"] {\n    overflow: hidden ").concat(r,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(r,";"),"margin"===n&&"\n    padding-left: ".concat(i,"px;\n    padding-top: ").concat(a,"px;\n    padding-right: ").concat(o,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(s,"px ").concat(r,";\n    "),"padding"===n&&"padding-right: ".concat(s,"px ").concat(r,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(kne," {\n    right: ").concat(s,"px ").concat(r,";\n  }\n  \n  .").concat(Cne," {\n    margin-right: ").concat(s,"px ").concat(r,";\n  }\n  \n  .").concat(kne," .").concat(kne," {\n    right: 0 ").concat(r,";\n  }\n  \n  .").concat(Cne," .").concat(Cne," {\n    margin-right: 0 ").concat(r,";\n  }\n  \n  body[").concat(Bne,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(s,"px;\n  }\n")},Wne=function(){var e=parseInt(document.body.getAttribute(Bne)||"0",10);return isFinite(e)?e:0},Kne=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=void 0===r?"margin":r;wt.useEffect(function(){return document.body.setAttribute(Bne,(Wne()+1).toString()),function(){var e=Wne()-1;e<=0?document.body.removeAttribute(Bne):document.body.setAttribute(Bne,e.toString())}},[]);var a=wt.useMemo(function(){return Vne(i)},[i]);return wt.createElement($ne,{styles:qne(a,!t,i,n?"":"!important")})},Hne=!1;if("undefined"!=typeof window)try{var Gne=Object.defineProperty({},"passive",{get:function(){return Hne=!0,!0}});window.addEventListener("test",Gne,Gne),window.removeEventListener("test",Gne,Gne)}catch(Yoe){Hne=!1}var Qne=!!Hne&&{passive:!1},Yne=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return"hidden"!==n[t]&&!(n.overflowY===n.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===n[t])},Zne=function(e,t){var n=t.ownerDocument,r=t;do{if("undefined"!=typeof ShadowRoot&&r instanceof ShadowRoot&&(r=r.host),Xne(e,r)){var i=Jne(e,r);if(i[1]>i[2])return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Xne=function(e,t){return"v"===e?function(e){return Yne(e,"overflowY")}(t):function(e){return Yne(e,"overflowX")}(t)},Jne=function(e,t){return"v"===e?[(n=t).scrollTop,n.scrollHeight,n.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var n},ere=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},tre=function(e){return[e.deltaX,e.deltaY]},nre=function(e){return e&&"current"in e?e.current:e},rre=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},ire=0,are=[];function ore(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const sre=(lre=function(e){var t=wt.useRef([]),n=wt.useRef([0,0]),r=wt.useRef(),i=wt.useState(ire++)[0],a=wt.useState(Fne)[0],o=wt.useRef(e);wt.useEffect(function(){o.current=e},[e]),wt.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var t=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([e.lockRef.current],(e.shards||[]).map(nre),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var s=wt.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!o.current.allowPinchZoom;var i,a=ere(e),s=n.current,l="deltaX"in e?e.deltaX:s[0]-a[0],c="deltaY"in e?e.deltaY:s[1]-a[1],u=e.target,d=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===d&&"range"===u.type)return!1;var h=Zne(d,u);if(!h)return!0;if(h?i=d:(i="v"===d?"h":"v",h=Zne(d,u)),!h)return!1;if(!r.current&&"changedTouches"in e&&(l||c)&&(r.current=i),!i)return!0;var f=r.current||i;return function(e,t,n,r){var i=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),a=i*r,o=n.target,s=t.contains(o),l=!1,c=a>0,u=0,d=0;do{if(!o)break;var h=Jne(e,o),f=h[0],p=h[1]-h[2]-i*f;(f||p)&&Xne(e,o)&&(u+=p,d+=f);var m=o.parentNode;o=m&&m.nodeType===Node.DOCUMENT_FRAGMENT_NODE?m.host:m}while(!s&&o!==document.body||s&&(t.contains(o)||t===o));return(c&&Math.abs(u)<1||!c&&Math.abs(d)<1)&&(l=!0),l}(f,t,e,"h"===f?l:c)},[]),l=wt.useCallback(function(e){var n=e;if(are.length&&are[are.length-1]===a){var r="deltaY"in n?tre(n):ere(n),i=t.current.filter(function(e){return e.name===n.type&&(e.target===n.target||n.target===e.shadowParent)&&(t=e.delta,i=r,t[0]===i[0]&&t[1]===i[1]);var t,i})[0];if(i&&i.should)n.cancelable&&n.preventDefault();else if(!i){var l=(o.current.shards||[]).map(nre).filter(Boolean).filter(function(e){return e.contains(n.target)});(l.length>0?s(n,l[0]):!o.current.noIsolation)&&n.cancelable&&n.preventDefault()}}},[]),c=wt.useCallback(function(e,n,r,i){var a={name:e,delta:n,target:r,should:i,shadowParent:ore(r)};t.current.push(a),setTimeout(function(){t.current=t.current.filter(function(e){return e!==a})},1)},[]),u=wt.useCallback(function(e){n.current=ere(e),r.current=void 0},[]),d=wt.useCallback(function(t){c(t.type,tre(t),t.target,s(t,e.lockRef.current))},[]),h=wt.useCallback(function(t){c(t.type,ere(t),t.target,s(t,e.lockRef.current))},[]);wt.useEffect(function(){return are.push(a),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,Qne),document.addEventListener("touchmove",l,Qne),document.addEventListener("touchstart",u,Qne),function(){are=are.filter(function(e){return e!==a}),document.removeEventListener("wheel",l,Qne),document.removeEventListener("touchmove",l,Qne),document.removeEventListener("touchstart",u,Qne)}},[]);var f=e.removeScrollBar,p=e.inert;return wt.createElement(wt.Fragment,null,p?wt.createElement(a,{styles:rre(i)}):null,f?wt.createElement(Kne,{noRelative:e.noRelative,gapMode:e.gapMode}):null)},jne.useMedium(lre),Pne);var lre,cre=wt.forwardRef(function(e,t){return wt.createElement(Mne,Ene({},e,{ref:t,sideCar:sre}))});cre.classNames=Mne.classNames;var ure=[" ","Enter","ArrowUp","ArrowDown"],dre=[" ","Enter"],hre="Select",[fre,pre,mre]=S8(hre),[gre]=_8(hre,[mre,Kte]),yre=Kte(),[vre,bre]=gre(hre),[wre,xre]=gre(hre),_re=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:i,onOpenChange:a,value:o,defaultValue:s,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:h,required:f,form:p}=e,m=yre(t),[g,y]=wt.useState(null),[v,b]=wt.useState(null),[w,x]=wt.useState(!1),_=C8(c),[E,S]=pne({prop:r,defaultProp:i??!1,onChange:a,caller:hre}),[k,C]=pne({prop:o,defaultProp:s,onChange:l,caller:hre}),O=wt.useRef(null),T=!g||(p||!!g.closest("form")),[A,N]=wt.useState(new Set),I=Array.from(A).map(e=>e.props.value).join(";");return Nt.jsx(lne,{...m,children:Nt.jsxs(vre,{required:f,scope:t,trigger:g,onTriggerChange:y,valueNode:v,onValueNodeChange:b,valueNodeHasChildren:w,onValueNodeHasChildrenChange:x,contentId:X8(),value:k,onValueChange:C,open:E,onOpenChange:S,dir:_,triggerPointerDownPosRef:O,disabled:h,children:[Nt.jsx(fre.Provider,{scope:t,children:Nt.jsx(wre,{scope:e.__scopeSelect,onNativeOptionAdd:wt.useCallback(e=>{N(t=>new Set(t).add(e))},[]),onNativeOptionRemove:wt.useCallback(e=>{N(t=>{const n=new Set(t);return n.delete(e),n})},[]),children:n})}),T?Nt.jsxs(iie,{"aria-hidden":!0,required:f,tabIndex:-1,name:u,autoComplete:d,value:k,onChange:e=>C(e.target.value),disabled:h,form:p,children:[void 0===k?Nt.jsx("option",{value:""}):null,Array.from(A)]},I):null]})})};_re.displayName=hre;var Ere="SelectTrigger",Sre=wt.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...i}=e,a=yre(n),o=bre(Ere,n),s=o.disabled||r,l=rR(t,o.onTriggerChange),c=pre(n),u=wt.useRef("touch"),[d,h,f]=oie(e=>{const t=c().filter(e=>!e.disabled),n=t.find(e=>e.value===o.value),r=sie(t,e,n);void 0!==r&&o.onValueChange(r.value)}),p=e=>{s||(o.onOpenChange(!0),f()),e&&(o.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return Nt.jsx(cne,{asChild:!0,...a,children:Nt.jsx(yR.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:s,"data-disabled":s?"":void 0,"data-placeholder":aie(o.value)?"":void 0,...i,ref:l,onClick:x8(i.onClick,e=>{e.currentTarget.focus(),"mouse"!==u.current&&p(e)}),onPointerDown:x8(i.onPointerDown,e=>{u.current=e.pointerType;const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(p(e),e.preventDefault())}),onKeyDown:x8(i.onKeyDown,e=>{const t=""!==d.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||h(e.key),t&&" "===e.key||ure.includes(e.key)&&(p(),e.preventDefault())})})})});Sre.displayName=Ere;var kre="SelectValue",Cre=wt.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:i,children:a,placeholder:o="",...s}=e,l=bre(kre,n),{onValueNodeHasChildrenChange:c}=l,u=void 0!==a,d=rR(t,l.onValueNodeChange);return Q8(()=>{c(u)},[c,u]),Nt.jsx(yR.span,{...s,ref:d,style:{pointerEvents:"none"},children:aie(l.value)?Nt.jsx(Nt.Fragment,{children:o}):a})});Cre.displayName=kre;var Ore=wt.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...i}=e;return Nt.jsx(yR.span,{"aria-hidden":!0,...i,ref:t,children:r||"▼"})});Ore.displayName="SelectIcon";var Tre=e=>Nt.jsx(hne,{asChild:!0,...e});Tre.displayName="SelectPortal";var Are="SelectContent",Nre=wt.forwardRef((e,t)=>{const n=bre(Are,e.__scopeSelect),[r,i]=wt.useState();if(Q8(()=>{i(new DocumentFragment)},[]),!n.open){const t=r;return t?Fh.createPortal(Nt.jsx(Pre,{scope:e.__scopeSelect,children:Nt.jsx(fre.Slot,{scope:e.__scopeSelect,children:Nt.jsx("div",{children:e.children})})}),t):null}return Nt.jsx(Mre,{...e,ref:t})});Nre.displayName=Are;var Ire=10,[Pre,jre]=gre(Are),Dre=iR("SelectContent.RemoveScroll"),Mre=wt.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:o,side:s,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:f,sticky:p,hideWhenDetached:m,avoidCollisions:g,...y}=e,v=bre(Are,n),[b,w]=wt.useState(null),[x,_]=wt.useState(null),E=rR(t,e=>w(e)),[S,k]=wt.useState(null),[C,O]=wt.useState(null),T=pre(n),[A,N]=wt.useState(!1),I=wt.useRef(!1);wt.useEffect(()=>{if(b)return _ne(b)},[b]),L8();const P=wt.useCallback(e=>{const[t,...n]=T().map(e=>e.ref.current),[r]=n.slice(-1),i=document.activeElement;for(const a of e){if(a===i)return;if(null==a||a.scrollIntoView({block:"nearest"}),a===t&&x&&(x.scrollTop=0),a===r&&x&&(x.scrollTop=x.scrollHeight),null==a||a.focus(),document.activeElement!==i)return}},[T,x]),j=wt.useCallback(()=>P([S,b]),[P,S,b]);wt.useEffect(()=>{A&&j()},[A,j]);const{onOpenChange:D,triggerPointerDownPosRef:M}=v;wt.useEffect(()=>{if(b){let e={x:0,y:0};const t=t=>{var n,r;e={x:Math.abs(Math.round(t.pageX)-((null==(n=M.current)?void 0:n.x)??0)),y:Math.abs(Math.round(t.pageY)-((null==(r=M.current)?void 0:r.y)??0))}},n=n=>{e.x<=10&&e.y<=10?n.preventDefault():b.contains(n.target)||D(!1),document.removeEventListener("pointermove",t),M.current=null};return null!==M.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",n,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",n,{capture:!0})}}},[b,D,M]),wt.useEffect(()=>{const e=()=>D(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[D]);const[R,L]=oie(e=>{const t=T().filter(e=>!e.disabled),n=t.find(e=>e.ref.current===document.activeElement),r=sie(t,e,n);r&&setTimeout(()=>r.ref.current.focus())}),F=wt.useCallback((e,t,n)=>{const r=!I.current&&!n;(void 0!==v.value&&v.value===t||r)&&(k(e),r&&(I.current=!0))},[v.value]),z=wt.useCallback(()=>null==b?void 0:b.focus(),[b]),U=wt.useCallback((e,t,n)=>{const r=!I.current&&!n;(void 0!==v.value&&v.value===t||r)&&O(e)},[v.value]),V="popper"===r?Lre:Rre,$=V===Lre?{side:s,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:f,sticky:p,hideWhenDetached:m,avoidCollisions:g}:{};return Nt.jsx(Pre,{scope:n,content:b,viewport:x,onViewportChange:_,itemRefCallback:F,selectedItem:S,onItemLeave:z,itemTextRefCallback:U,focusSelectedItem:j,selectedItemText:C,position:r,isPositioned:A,searchRef:R,children:Nt.jsx(cre,{as:Dre,allowPinchZoom:!0,children:Nt.jsx($8,{asChild:!0,trapped:v.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:x8(i,e=>{var t;null==(t=v.trigger)||t.focus({preventScroll:!0}),e.preventDefault()}),children:Nt.jsx(j8,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:Nt.jsx(V,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:e=>e.preventDefault(),...y,...$,onPlaced:()=>N(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:x8(y.onKeyDown,e=>{const t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||L(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=T().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){const n=e.target,r=t.indexOf(n);t=t.slice(r+1)}setTimeout(()=>P(t)),e.preventDefault()}})})})})})})});Mre.displayName="SelectContentImpl";var Rre=wt.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...i}=e,a=bre(Are,n),o=jre(Are,n),[s,l]=wt.useState(null),[c,u]=wt.useState(null),d=rR(t,e=>u(e)),h=pre(n),f=wt.useRef(!1),p=wt.useRef(!0),{viewport:m,selectedItem:g,selectedItemText:y,focusSelectedItem:v}=o,b=wt.useCallback(()=>{if(a.trigger&&a.valueNode&&s&&c&&m&&g&&y){const e=a.trigger.getBoundingClientRect(),t=c.getBoundingClientRect(),n=a.valueNode.getBoundingClientRect(),i=y.getBoundingClientRect();if("rtl"!==a.dir){const r=i.left-t.left,a=n.left-r,o=e.left-a,l=e.width+o,c=Math.max(l,t.width),u=window.innerWidth-Ire,d=w8(a,[Ire,Math.max(Ire,u-c)]);s.style.minWidth=l+"px",s.style.left=d+"px"}else{const r=t.right-i.right,a=window.innerWidth-n.right-r,o=window.innerWidth-e.right-a,l=e.width+o,c=Math.max(l,t.width),u=window.innerWidth-Ire,d=w8(a,[Ire,Math.max(Ire,u-c)]);s.style.minWidth=l+"px",s.style.right=d+"px"}const o=h(),l=window.innerHeight-2*Ire,u=m.scrollHeight,d=window.getComputedStyle(c),p=parseInt(d.borderTopWidth,10),v=parseInt(d.paddingTop,10),b=parseInt(d.borderBottomWidth,10),w=p+v+u+parseInt(d.paddingBottom,10)+b,x=Math.min(5*g.offsetHeight,w),_=window.getComputedStyle(m),E=parseInt(_.paddingTop,10),S=parseInt(_.paddingBottom,10),k=e.top+e.height/2-Ire,C=l-k,O=g.offsetHeight/2,T=p+v+(g.offsetTop+O),A=w-T;if(T<=k){const e=o.length>0&&g===o[o.length-1].ref.current;s.style.bottom="0px";const t=c.clientHeight-m.offsetTop-m.offsetHeight,n=T+Math.max(C,O+(e?S:0)+t+b);s.style.height=n+"px"}else{const e=o.length>0&&g===o[0].ref.current;s.style.top="0px";const t=Math.max(k,p+m.offsetTop+(e?E:0)+O)+A;s.style.height=t+"px",m.scrollTop=T-k+m.offsetTop}s.style.margin=`${Ire}px 0`,s.style.minHeight=x+"px",s.style.maxHeight=l+"px",null==r||r(),requestAnimationFrame(()=>f.current=!0)}},[h,a.trigger,a.valueNode,s,c,m,g,y,a.dir,r]);Q8(()=>b(),[b]);const[w,x]=wt.useState();Q8(()=>{c&&x(window.getComputedStyle(c).zIndex)},[c]);const _=wt.useCallback(e=>{e&&!0===p.current&&(b(),null==v||v(),p.current=!1)},[b,v]);return Nt.jsx(Fre,{scope:n,contentWrapper:s,shouldExpandOnScrollRef:f,onScrollButtonChange:_,children:Nt.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:w},children:Nt.jsx(yR.div,{...i,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});Rre.displayName="SelectItemAlignedPosition";var Lre=wt.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=Ire,...a}=e,o=yre(n);return Nt.jsx(une,{...o,...a,ref:t,align:r,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Lre.displayName="SelectPopperPosition";var[Fre,zre]=gre(Are,{}),Ure="SelectViewport",Vre=wt.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...i}=e,a=jre(Ure,n),o=zre(Ure,n),s=rR(t,a.onViewportChange),l=wt.useRef(0);return Nt.jsxs(Nt.Fragment,{children:[Nt.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),Nt.jsx(fre.Slot,{scope:n,children:Nt.jsx(yR.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:s,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:x8(i.onScroll,e=>{const t=e.currentTarget,{contentWrapper:n,shouldExpandOnScrollRef:r}=o;if((null==r?void 0:r.current)&&n){const e=Math.abs(l.current-t.scrollTop);if(e>0){const r=window.innerHeight-2*Ire,i=parseFloat(n.style.minHeight),a=parseFloat(n.style.height),o=Math.max(i,a);if(o<r){const i=o+e,a=Math.min(r,i),s=i-a;n.style.height=a+"px","0px"===n.style.bottom&&(t.scrollTop=s>0?s:0,n.style.justifyContent="flex-end")}}}l.current=t.scrollTop})})})]})});Vre.displayName=Ure;var $re="SelectGroup",[Bre,qre]=gre($re);wt.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=X8();return Nt.jsx(Bre,{scope:n,id:i,children:Nt.jsx(yR.div,{role:"group","aria-labelledby":i,...r,ref:t})})}).displayName=$re;var Wre="SelectLabel";wt.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=qre(Wre,n);return Nt.jsx(yR.div,{id:i.id,...r,ref:t})}).displayName=Wre;var Kre="SelectItem",[Hre,Gre]=gre(Kre),Qre=wt.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:a,...o}=e,s=bre(Kre,n),l=jre(Kre,n),c=s.value===r,[u,d]=wt.useState(a??""),[h,f]=wt.useState(!1),p=rR(t,e=>{var t;return null==(t=l.itemRefCallback)?void 0:t.call(l,e,r,i)}),m=X8(),g=wt.useRef("touch"),y=()=>{i||(s.onValueChange(r),s.onOpenChange(!1))};if(""===r)throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return Nt.jsx(Hre,{scope:n,value:r,disabled:i,textId:m,isSelected:c,onItemTextChange:wt.useCallback(e=>{d(t=>t||((null==e?void 0:e.textContent)??"").trim())},[]),children:Nt.jsx(fre.ItemSlot,{scope:n,value:r,disabled:i,textValue:u,children:Nt.jsx(yR.div,{role:"option","aria-labelledby":m,"data-highlighted":h?"":void 0,"aria-selected":c&&h,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:p,onFocus:x8(o.onFocus,()=>f(!0)),onBlur:x8(o.onBlur,()=>f(!1)),onClick:x8(o.onClick,()=>{"mouse"!==g.current&&y()}),onPointerUp:x8(o.onPointerUp,()=>{"mouse"===g.current&&y()}),onPointerDown:x8(o.onPointerDown,e=>{g.current=e.pointerType}),onPointerMove:x8(o.onPointerMove,e=>{var t;g.current=e.pointerType,i?null==(t=l.onItemLeave)||t.call(l):"mouse"===g.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:x8(o.onPointerLeave,e=>{var t;e.currentTarget===document.activeElement&&(null==(t=l.onItemLeave)||t.call(l))}),onKeyDown:x8(o.onKeyDown,e=>{var t;""!==(null==(t=l.searchRef)?void 0:t.current)&&" "===e.key||(dre.includes(e.key)&&y()," "===e.key&&e.preventDefault())})})})})});Qre.displayName=Kre;var Yre="SelectItemText",Zre=wt.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:i,...a}=e,o=bre(Yre,n),s=jre(Yre,n),l=Gre(Yre,n),c=xre(Yre,n),[u,d]=wt.useState(null),h=rR(t,e=>d(e),l.onItemTextChange,e=>{var t;return null==(t=s.itemTextRefCallback)?void 0:t.call(s,e,l.value,l.disabled)}),f=null==u?void 0:u.textContent,p=wt.useMemo(()=>Nt.jsx("option",{value:l.value,disabled:l.disabled,children:f},l.value),[l.disabled,l.value,f]),{onNativeOptionAdd:m,onNativeOptionRemove:g}=c;return Q8(()=>(m(p),()=>g(p)),[m,g,p]),Nt.jsxs(Nt.Fragment,{children:[Nt.jsx(yR.span,{id:l.textId,...a,ref:h}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Fh.createPortal(a.children,o.valueNode):null]})});Zre.displayName=Yre;var Xre="SelectItemIndicator",Jre=wt.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return Gre(Xre,n).isSelected?Nt.jsx(yR.span,{"aria-hidden":!0,...r,ref:t}):null});Jre.displayName=Xre;var eie="SelectScrollUpButton";wt.forwardRef((e,t)=>{const n=jre(eie,e.__scopeSelect),r=zre(eie,e.__scopeSelect),[i,a]=wt.useState(!1),o=rR(t,r.onScrollButtonChange);return Q8(()=>{if(n.viewport&&n.isPositioned){let e=function(){const e=t.scrollTop>0;a(e)};const t=n.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[n.viewport,n.isPositioned]),i?Nt.jsx(nie,{...e,ref:o,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=n;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}}):null}).displayName=eie;var tie="SelectScrollDownButton";wt.forwardRef((e,t)=>{const n=jre(tie,e.__scopeSelect),r=zre(tie,e.__scopeSelect),[i,a]=wt.useState(!1),o=rR(t,r.onScrollButtonChange);return Q8(()=>{if(n.viewport&&n.isPositioned){let e=function(){const e=t.scrollHeight-t.clientHeight,n=Math.ceil(t.scrollTop)<e;a(n)};const t=n.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[n.viewport,n.isPositioned]),i?Nt.jsx(nie,{...e,ref:o,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=n;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}}):null}).displayName=tie;var nie=wt.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=e,a=jre("SelectScrollButton",n),o=wt.useRef(null),s=pre(n),l=wt.useCallback(()=>{null!==o.current&&(window.clearInterval(o.current),o.current=null)},[]);return wt.useEffect(()=>()=>l(),[l]),Q8(()=>{var e;const t=s().find(e=>e.ref.current===document.activeElement);null==(e=null==t?void 0:t.ref.current)||e.scrollIntoView({block:"nearest"})},[s]),Nt.jsx(yR.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:x8(i.onPointerDown,()=>{null===o.current&&(o.current=window.setInterval(r,50))}),onPointerMove:x8(i.onPointerMove,()=>{var e;null==(e=a.onItemLeave)||e.call(a),null===o.current&&(o.current=window.setInterval(r,50))}),onPointerLeave:x8(i.onPointerLeave,()=>{l()})})});wt.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return Nt.jsx(yR.div,{"aria-hidden":!0,...r,ref:t})}).displayName="SelectSeparator";var rie="SelectArrow";wt.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=yre(n),a=bre(rie,n),o=jre(rie,n);return a.open&&"popper"===o.position?Nt.jsx(dne,{...i,...r,ref:t}):null}).displayName=rie;var iie=wt.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const i=wt.useRef(null),a=rR(r,i),o=function(e){const t=wt.useRef({value:e,previous:e});return wt.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}(t);return wt.useEffect(()=>{const e=i.current;if(!e)return;const n=window.HTMLSelectElement.prototype,r=Object.getOwnPropertyDescriptor(n,"value").set;if(o!==t&&r){const n=new Event("change",{bubbles:!0});r.call(e,t),e.dispatchEvent(n)}},[o,t]),Nt.jsx(yR.select,{...n,style:{...mne,...n.style},ref:a,defaultValue:t})});function aie(e){return""===e||void 0===e}function oie(e){const t=O8(e),n=wt.useRef(""),r=wt.useRef(0),i=wt.useCallback(e=>{const i=n.current+e;t(i),function e(t){n.current=t,window.clearTimeout(r.current),""!==t&&(r.current=window.setTimeout(()=>e(""),1e3))}(i)},[t]),a=wt.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return wt.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,a]}function sie(e,t,n){const r=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let a=(o=e,s=Math.max(i,0),o.map((e,t)=>o[(s+t)%o.length]));var o,s;1===r.length&&(a=a.filter(e=>e!==n));const l=a.find(e=>e.textValue.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}iie.displayName="SelectBubbleInput";var lie=_re,cie=Sre,uie=Cre,die=Ore,hie=Tre,fie=Nre,pie=Vre,mie=Qre,gie=Zre,yie=Jre;function vie({children:e,...t}){return Nt.jsxs(lie,{...t,children:[Nt.jsxs(cie,{className:"flex h-10 w-full items-center justify-between rounded-md border border-slate-200 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2",children:[Nt.jsx(uie,{}),Nt.jsx(die,{children:Nt.jsx(AR,{className:"h-4 w-4 text-slate-500"})})]}),Nt.jsx(hie,{children:Nt.jsx(fie,{className:"z-50 overflow-hidden rounded-md border border-slate-200 bg-white shadow-lg",children:Nt.jsx(pie,{className:"p-2",children:e})})})]})}function bie({children:e,className:t,...n}){return Nt.jsxs(mie,{className:uR("relative flex w-full cursor-default select-none items-center rounded-sm px-3 py-2 text-sm outline-none focus:bg-slate-100 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[Nt.jsx(gie,{children:e}),Nt.jsx(yie,{className:"absolute right-2 inline-flex items-center",children:Nt.jsx(TR,{className:"h-4 w-4"})})]})}const wie=[{value:"ACTIVO",label:"Activo"},{value:"PAUSADO",label:"Pausado"}];function xie({defaultValues:e,onSubmit:t,submitLabel:n="Guardar cliente"}){const r=Kg({resolver:sw(y8),defaultValues:e??{nombre_legal:"",alias:"",rfc:"",email:"",telefono:"",direccion:"",ciudad:"",cp:"",limite_credito:0,dias_credito:0,estatus:"ACTIVO"}});wt.useEffect(()=>{e&&r.reset(e)},[e,r]);const i=r.handleSubmit(async e=>{await t(e)});return Nt.jsxs("form",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",onSubmit:i,children:[Nt.jsxs("div",{className:"space-y-2",children:[Nt.jsx(wR,{htmlFor:"nombre_legal",children:"Nombre fiscal"}),Nt.jsx(gR,{id:"nombre_legal",...r.register("nombre_legal")}),r.formState.errors.nombre_legal?Nt.jsx("p",{className:"text-xs text-red-600",children:r.formState.errors.nombre_legal.message}):null]}),Nt.jsxs("div",{className:"space-y-2",children:[Nt.jsx(wR,{htmlFor:"alias",children:"Alias comercial"}),Nt.jsx(gR,{id:"alias",...r.register("alias")}),r.formState.errors.alias?Nt.jsx("p",{className:"text-xs text-red-600",children:r.formState.errors.alias.message}):null]}),Nt.jsxs("div",{className:"space-y-2",children:[Nt.jsx(wR,{htmlFor:"rfc",children:"RFC"}),Nt.jsx(gR,{id:"rfc",...r.register("rfc"),className:"uppercase"}),r.formState.errors.rfc?Nt.jsx("p",{className:"text-xs text-red-600",children:r.formState.errors.rfc.message}):null]}),Nt.jsxs("div",{className:"space-y-2",children:[Nt.jsx(wR,{htmlFor:"email",children:"Correo"}),Nt.jsx(gR,{id:"email",type:"email",...r.register("email")}),r.formState.errors.email?Nt.jsx("p",{className:"text-xs text-red-600",children:r.formState.errors.email.message}):null]}),Nt.jsxs("div",{className:"space-y-2",children:[Nt.jsx(wR,{htmlFor:"telefono",children:"Teléfono"}),Nt.jsx(gR,{id:"telefono",...r.register("telefono"),inputMode:"numeric"}),r.formState.errors.telefono?Nt.jsx("p",{className:"text-xs text-red-600",children:r.formState.errors.telefono.message}):null]}),Nt.jsxs("div",{className:"space-y-2",children:[Nt.jsx(wR,{htmlFor:"ciudad",children:"Ciudad"}),Nt.jsx(gR,{id:"ciudad",...r.register("ciudad")}),r.formState.errors.ciudad?Nt.jsx("p",{className:"text-xs text-red-600",children:r.formState.errors.ciudad.message}):null]}),Nt.jsxs("div",{className:"space-y-2",children:[Nt.jsx(wR,{htmlFor:"direccion",children:"Dirección"}),Nt.jsx(gR,{id:"direccion",...r.register("direccion")}),r.formState.errors.direccion?Nt.jsx("p",{className:"text-xs text-red-600",children:r.formState.errors.direccion.message}):null]}),Nt.jsxs("div",{className:"space-y-2",children:[Nt.jsx(wR,{htmlFor:"cp",children:"Código Postal"}),Nt.jsx(gR,{id:"cp",...r.register("cp")}),r.formState.errors.cp?Nt.jsx("p",{className:"text-xs text-red-600",children:r.formState.errors.cp.message}):null]}),Nt.jsxs("div",{className:"space-y-2",children:[Nt.jsx(wR,{htmlFor:"limite_credito",children:"Límite de crédito"}),Nt.jsx(gR,{id:"limite_credito",type:"number",step:"0.01",...r.register("limite_credito",{valueAsNumber:!0})}),r.formState.errors.limite_credito?Nt.jsx("p",{className:"text-xs text-red-600",children:r.formState.errors.limite_credito.message}):null]}),Nt.jsxs("div",{className:"space-y-2",children:[Nt.jsx(wR,{htmlFor:"dias_credito",children:"Días de crédito"}),Nt.jsx(gR,{id:"dias_credito",type:"number",...r.register("dias_credito",{valueAsNumber:!0})}),r.formState.errors.dias_credito?Nt.jsx("p",{className:"text-xs text-red-600",children:r.formState.errors.dias_credito.message}):null]}),Nt.jsxs("div",{className:"space-y-2",children:[Nt.jsx(wR,{children:"Estatus"}),Nt.jsx(vie,{value:r.watch("estatus"),onValueChange:e=>r.setValue("estatus",e),children:wie.map(e=>Nt.jsx(bie,{value:e.value,children:e.label},e.value))})]}),Nt.jsx("div",{className:"md:col-span-2",children:Nt.jsx(mR,{type:"submit",className:"w-full",children:n})})]})}TD(eR,"clientes"),TD(eR,"pedidos"),TD(eR,"abonos"),TD(eR,"movimientos_caja");const _ie=TD(eR,"bitacora");async function Eie(e){await RM(_ie,{...e,timestamp:qM()})}const Sie=TD(eR,"clientes");async function kie(e,t){await function(e){return LM(zO(e.firestore,jD),[new TN(e._key,mN.none())])}(AD(Sie,e)),await Eie({entidad:"clientes",entidad_id:e,accion:"ELIMINAR",usuario:t,datos:{}})}const Cie=["clientes"];function Oie(e={},t={}){return Nm({queryKey:[...Cie,e],queryFn:()=>async function(e){const t=[];(null==e?void 0:e.estatus)&&"TODOS"!==e.estatus&&t.push(pM("estatus","==",e.estatus)),(null==e?void 0:e.ciudad)&&t.push(pM("ciudad","==",e.ciudad));const n=hM(Sie,...t,yM("nombre_legal")),r=(await jM(n)).docs.map(e=>({id:e.id,...e.data()}));if(null==e?void 0:e.search){const t=e.search.toLowerCase();return r.filter(e=>[e.nombre_legal,e.alias,e.email,e.ciudad].some(e=>e.toLowerCase().includes(t)))}return r}(e),staleTime:6e4,enabled:t.enabled})}function Tie(){const e=Sm();return Im({mutationFn:e=>async function(e,t){const n={...e,creado_en:qM(),actualizado_en:qM()},r=await RM(Sie,n);return await Eie({entidad:"clientes",entidad_id:r.id,accion:"CREAR",usuario:t,datos:n}),r.id}(e.data,e.usuarioId),onSuccess:()=>e.invalidateQueries({queryKey:Cie})})}function Aie(){const e=Sm();return Im({mutationFn:e=>async function(e,t,n){const r=AD(Sie,e),i={...t,actualizado_en:qM()};await MM(r,i),await Eie({entidad:"clientes",entidad_id:e,accion:"ACTUALIZAR",usuario:n,datos:i})}(e.id,e.data,e.usuarioId),onSuccess:()=>e.invalidateQueries({queryKey:Cie})})}const Nie=TD(eR,"pedidos");async function Iie(e,t){const n=function(e,t){return{folio:e.folio,cliente_id:AD(eR,"clientes",e.cliente_id),fecha_pedido:qO.fromDate(e.fecha_pedido),fecha_compromiso:qO.fromDate(e.fecha_compromiso),status:e.status,anticipo:e.anticipo,subtotal:e.subtotal,descuento:e.descuento,impuestos:e.impuestos,total:e.total,saldo:e.saldo,prioridad:e.prioridad,notas:e.notas??"",creado_por:t,creado_en:qM(),actualizado_en:qM()}}(e,t),r=await RM(Nie,n),i=function(e){return DD(e=zO(e,jD)),new zM(e,t=>LM(e,t))}(eR);return e.items.forEach(e=>{const t=e.cantidad*e.precio_unitario,n=AD((a=r.id,TD(eR,"pedidos",a,"pedido_items")));var a;i.set(n,{descripcion_item:e.descripcion_item,prenda:e.prenda,talla:e.talla,color_prenda:e.color_prenda,ubicacion:e.ubicacion,puntadas_estimadas:e.puntadas_estimadas,cantidad:e.cantidad,precio_unitario:e.precio_unitario,importe:t,observaciones:e.observaciones??""})}),await i.commit(),await Eie({entidad:"pedidos",entidad_id:r.id,accion:"CREAR",usuario:t,datos:n}),r.id}const Pie=["pedidos"];function jie(e={},t={}){return Nm({queryKey:[...Pie,e],queryFn:()=>async function(e){const t=[];(null==e?void 0:e.status)&&"TODOS"!==e.status&&t.push(pM("status","==",e.status)),(null==e?void 0:e.prioridad)&&"TODAS"!==e.prioridad&&t.push(pM("prioridad","==",e.prioridad)),(null==e?void 0:e.clienteId)&&t.push(pM("cliente_id","==",AD(eR,"clientes",e.clienteId)));const n=hM(Nie,...t,yM("fecha_compromiso","desc"),bM(100));return(await jM(n)).docs.map(e=>({id:e.id,...e.data()}))}(e),staleTime:3e4,enabled:t.enabled})}function Die(){const e=Sm();return Im({mutationFn:e=>async function(e,t,n,r={}){const i=AD(Nie,e),a={status:t,actualizado_en:qM()};if(await MM(i,a),r.estado){const t=TD(eR,"pedidos",e,"produccion_eventos");await RM(t,{estado:r.estado,responsable:r.responsable??n,fecha_inicio:r.fecha_inicio??qM(),fecha_fin:r.fecha_fin??null,evidencia_url:r.evidencia_url??"",notas:r.notas??""})}await Eie({entidad:"pedidos",entidad_id:e,accion:`CAMBIO_ESTADO_${t}`,usuario:n,datos:a})}(e.id,e.estado,e.usuarioId,e.data),onSuccess:()=>e.invalidateQueries({queryKey:Pie})})}var Mie=e=>{const{present:t,children:n}=e,r=function(e){const[t,n]=wt.useState(),r=wt.useRef(null),i=wt.useRef(e),a=wt.useRef("none"),o=e?"mounted":"unmounted",[s,l]=function(e,t){return wt.useReducer((e,n)=>t[e][n]??e,e)}(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return wt.useEffect(()=>{const e=Rie(r.current);a.current="mounted"===s?e:"none"},[s]),Q8(()=>{const t=r.current,n=i.current;if(n!==e){const r=a.current,o=Rie(t);if(e)l("MOUNT");else if("none"===o||"none"===(null==t?void 0:t.display))l("UNMOUNT");else{l(n&&r!==o?"ANIMATION_OUT":"UNMOUNT")}i.current=e}},[e,l]),Q8(()=>{if(t){let e;const n=t.ownerDocument.defaultView??window,o=a=>{const o=Rie(r.current).includes(CSS.escape(a.animationName));if(a.target===t&&o&&(l("ANIMATION_END"),!i.current)){const r=t.style.animationFillMode;t.style.animationFillMode="forwards",e=n.setTimeout(()=>{"forwards"===t.style.animationFillMode&&(t.style.animationFillMode=r)})}},s=e=>{e.target===t&&(a.current=Rie(r.current))};return t.addEventListener("animationstart",s),t.addEventListener("animationcancel",o),t.addEventListener("animationend",o),()=>{n.clearTimeout(e),t.removeEventListener("animationstart",s),t.removeEventListener("animationcancel",o),t.removeEventListener("animationend",o)}}l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:wt.useCallback(e=>{r.current=e?getComputedStyle(e):null,n(e)},[])}}(t),i="function"==typeof n?n({present:r.isPresent}):wt.Children.only(n),a=rR(r.ref,function(e){var t,n;let r=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,i=r&&"isReactWarning"in r&&r.isReactWarning;if(i)return e.ref;if(r=null==(n=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:n.get,i=r&&"isReactWarning"in r&&r.isReactWarning,i)return e.props.ref;return e.props.ref||e.ref}(i));return"function"==typeof n||r.isPresent?wt.cloneElement(i,{ref:a}):null};function Rie(e){return(null==e?void 0:e.animationName)||"none"}Mie.displayName="Presence";var Lie="Dialog",[Fie]=_8(Lie),[zie,Uie]=Fie(Lie),Vie=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:i,onOpenChange:a,modal:o=!0}=e,s=wt.useRef(null),l=wt.useRef(null),[c,u]=pne({prop:r,defaultProp:i??!1,onChange:a,caller:Lie});return Nt.jsx(zie,{scope:t,triggerRef:s,contentRef:l,contentId:X8(),titleId:X8(),descriptionId:X8(),open:c,onOpenChange:u,onOpenToggle:wt.useCallback(()=>u(e=>!e),[u]),modal:o,children:n})};Vie.displayName=Lie;var $ie="DialogTrigger",Bie=wt.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=Uie($ie,n),a=rR(t,i.triggerRef);return Nt.jsx(yR.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":cae(i.open),...r,ref:a,onClick:x8(e.onClick,i.onOpenToggle)})});Bie.displayName=$ie;var qie="DialogPortal",[Wie,Kie]=Fie(qie,{forceMount:void 0}),Hie=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:i}=e,a=Uie(qie,t);return Nt.jsx(Wie,{scope:t,forceMount:n,children:wt.Children.map(r,e=>Nt.jsx(Mie,{present:n||a.open,children:Nt.jsx(hne,{asChild:!0,container:i,children:e})}))})};Hie.displayName=qie;var Gie="DialogOverlay",Qie=wt.forwardRef((e,t)=>{const n=Kie(Gie,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,a=Uie(Gie,e.__scopeDialog);return a.modal?Nt.jsx(Mie,{present:r||a.open,children:Nt.jsx(Zie,{...i,ref:t})}):null});Qie.displayName=Gie;var Yie=iR("DialogOverlay.RemoveScroll"),Zie=wt.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=Uie(Gie,n);return Nt.jsx(cre,{as:Yie,allowPinchZoom:!0,shards:[i.contentRef],children:Nt.jsx(yR.div,{"data-state":cae(i.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Xie="DialogContent",Jie=wt.forwardRef((e,t)=>{const n=Kie(Xie,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,a=Uie(Xie,e.__scopeDialog);return Nt.jsx(Mie,{present:r||a.open,children:a.modal?Nt.jsx(eae,{...i,ref:t}):Nt.jsx(tae,{...i,ref:t})})});Jie.displayName=Xie;var eae=wt.forwardRef((e,t)=>{const n=Uie(Xie,e.__scopeDialog),r=wt.useRef(null),i=rR(t,n.contentRef,r);return wt.useEffect(()=>{const e=r.current;if(e)return _ne(e)},[]),Nt.jsx(nae,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:x8(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),null==(t=n.triggerRef.current)||t.focus()}),onPointerDownOutside:x8(e.onPointerDownOutside,e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey;(2===t.button||n)&&e.preventDefault()}),onFocusOutside:x8(e.onFocusOutside,e=>e.preventDefault())})}),tae=wt.forwardRef((e,t)=>{const n=Uie(Xie,e.__scopeDialog),r=wt.useRef(!1),i=wt.useRef(!1);return Nt.jsx(nae,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var a,o;null==(a=e.onCloseAutoFocus)||a.call(e,t),t.defaultPrevented||(r.current||null==(o=n.triggerRef.current)||o.focus(),t.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:t=>{var a,o;null==(a=e.onInteractOutside)||a.call(e,t),t.defaultPrevented||(r.current=!0,"pointerdown"===t.detail.originalEvent.type&&(i.current=!0));const s=t.target;(null==(o=n.triggerRef.current)?void 0:o.contains(s))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&i.current&&t.preventDefault()}})}),nae=wt.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,...o}=e,s=Uie(Xie,n),l=wt.useRef(null),c=rR(t,l);return L8(),Nt.jsxs(Nt.Fragment,{children:[Nt.jsx($8,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a,children:Nt.jsx(j8,{role:"dialog",id:s.contentId,"aria-describedby":s.descriptionId,"aria-labelledby":s.titleId,"data-state":cae(s.open),...o,ref:c,onDismiss:()=>s.onOpenChange(!1)})}),Nt.jsxs(Nt.Fragment,{children:[Nt.jsx(fae,{titleId:s.titleId}),Nt.jsx(pae,{contentRef:l,descriptionId:s.descriptionId})]})]})}),rae="DialogTitle",iae=wt.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=Uie(rae,n);return Nt.jsx(yR.h2,{id:i.titleId,...r,ref:t})});iae.displayName=rae;var aae="DialogDescription",oae=wt.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=Uie(aae,n);return Nt.jsx(yR.p,{id:i.descriptionId,...r,ref:t})});oae.displayName=aae;var sae="DialogClose",lae=wt.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=Uie(sae,n);return Nt.jsx(yR.button,{type:"button",...r,ref:t,onClick:x8(e.onClick,()=>i.onOpenChange(!1))})});function cae(e){return e?"open":"closed"}lae.displayName=sae;var uae="DialogTitleWarning",[dae,hae]=function(e,t){const n=wt.createContext(t),r=e=>{const{children:t,...r}=e,i=wt.useMemo(()=>r,Object.values(r));return Nt.jsx(n.Provider,{value:i,children:t})};return r.displayName=e+"Provider",[r,function(r){const i=wt.useContext(n);if(i)return i;if(void 0!==t)return t;throw new Error(`\`${r}\` must be used within \`${e}\``)}]}(uae,{contentName:Xie,titleName:rae,docsSlug:"dialog"}),fae=({titleId:e})=>{const t=hae(uae),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.\n\nIf you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return wt.useEffect(()=>{if(e){document.getElementById(e)||console.error(n)}},[n,e]),null},pae=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${hae("DialogDescriptionWarning").contentName}}.`;return wt.useEffect(()=>{var r;const i=null==(r=e.current)?void 0:r.getAttribute("aria-describedby");if(t&&i){document.getElementById(t)||console.warn(n)}},[n,e,t]),null},mae=Qie,gae=Jie,yae=iae,vae=oae,bae=lae;const wae=Vie,xae=Bie,_ae=Hie,Eae=wt.forwardRef(({className:e,...t},n)=>Nt.jsx(mae,{ref:n,className:uR("fixed inset-0 z-40 bg-slate-950/50 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out",e),...t}));Eae.displayName=mae.displayName;const Sae=wt.forwardRef(({className:e,children:t,...n},r)=>Nt.jsxs(_ae,{children:[Nt.jsx(Eae,{}),Nt.jsxs(gae,{ref:r,className:uR("fixed left-1/2 top-1/2 z-50 grid w-full max-w-2xl -translate-x-1/2 -translate-y-1/2 gap-4 rounded-xl border border-slate-200 bg-white p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out",e),...n,children:[t,Nt.jsx(bae,{className:"absolute right-4 top-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-accent",children:Nt.jsx(HR,{className:"h-4 w-4"})})]})]}));Sae.displayName=gae.displayName;const kae=({className:e,...t})=>Nt.jsx("div",{className:uR("flex flex-col space-y-1.5 text-center sm:text-left",e),...t}),Cae=wt.forwardRef(({className:e,...t},n)=>Nt.jsx(yae,{ref:n,className:uR("text-lg font-semibold leading-none tracking-tight",e),...t}));Cae.displayName=yae.displayName;const Oae=wt.forwardRef(({className:e,...t},n)=>Nt.jsx(vae,{ref:n,className:uR("text-sm text-slate-500",e),...t}));Oae.displayName=vae.displayName;var Tae="rovingFocusGroup.onEntryFocus",Aae={bubbles:!1,cancelable:!0},Nae="RovingFocusGroup",[Iae,Pae,jae]=S8(Nae),[Dae,Mae]=_8(Nae,[jae]),[Rae,Lae]=Dae(Nae),Fae=wt.forwardRef((e,t)=>Nt.jsx(Iae.Provider,{scope:e.__scopeRovingFocusGroup,children:Nt.jsx(Iae.Slot,{scope:e.__scopeRovingFocusGroup,children:Nt.jsx(zae,{...e,ref:t})})}));Fae.displayName=Nae;var zae=wt.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:s,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=e,h=wt.useRef(null),f=rR(t,h),p=C8(a),[m,g]=pne({prop:o,defaultProp:s??null,onChange:l,caller:Nae}),[y,v]=wt.useState(!1),b=O8(c),w=Pae(n),x=wt.useRef(!1),[_,E]=wt.useState(0);return wt.useEffect(()=>{const e=h.current;if(e)return e.addEventListener(Tae,b),()=>e.removeEventListener(Tae,b)},[b]),Nt.jsx(Rae,{scope:n,orientation:r,dir:p,loop:i,currentTabStopId:m,onItemFocus:wt.useCallback(e=>g(e),[g]),onItemShiftTab:wt.useCallback(()=>v(!0),[]),onFocusableItemAdd:wt.useCallback(()=>E(e=>e+1),[]),onFocusableItemRemove:wt.useCallback(()=>E(e=>e-1),[]),children:Nt.jsx(yR.div,{tabIndex:y||0===_?-1:0,"data-orientation":r,...d,ref:f,style:{outline:"none",...e.style},onMouseDown:x8(e.onMouseDown,()=>{x.current=!0}),onFocus:x8(e.onFocus,e=>{const t=!x.current;if(e.target===e.currentTarget&&t&&!y){const t=new CustomEvent(Tae,Aae);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=w().filter(e=>e.focusable);Bae([e.find(e=>e.active),e.find(e=>e.id===m),...e].filter(Boolean).map(e=>e.ref.current),u)}}x.current=!1}),onBlur:x8(e.onBlur,()=>v(!1))})})}),Uae="RovingFocusGroupItem",Vae=wt.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:a,children:o,...s}=e,l=X8(),c=a||l,u=Lae(Uae,n),d=u.currentTabStopId===c,h=Pae(n),{onFocusableItemAdd:f,onFocusableItemRemove:p,currentTabStopId:m}=u;return wt.useEffect(()=>{if(r)return f(),()=>p()},[r,f,p]),Nt.jsx(Iae.ItemSlot,{scope:n,id:c,focusable:r,active:i,children:Nt.jsx(yR.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...s,ref:t,onMouseDown:x8(e.onMouseDown,e=>{r?u.onItemFocus(c):e.preventDefault()}),onFocus:x8(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:x8(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void u.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,n){const r=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,n);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(r)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(r)?void 0:$ae[r]}(e,u.orientation,u.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let i=h().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)i.reverse();else if("prev"===t||"next"===t){"prev"===t&&i.reverse();const a=i.indexOf(e.currentTarget);i=u.loop?(r=a+1,(n=i).map((e,t)=>n[(r+t)%n.length])):i.slice(a+1)}setTimeout(()=>Bae(i))}var n,r}),children:"function"==typeof o?o({isCurrentTabStop:d,hasTabStop:null!=m}):o})})});Vae.displayName=Uae;var $ae={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Bae(e,t=!1){const n=document.activeElement;for(const r of e){if(r===n)return;if(r.focus({preventScroll:t}),document.activeElement!==n)return}}var qae=Fae,Wae=Vae,Kae="Tabs",[Hae]=_8(Kae,[Mae]),Gae=Mae(),[Qae,Yae]=Hae(Kae),Zae=wt.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:a,orientation:o="horizontal",dir:s,activationMode:l="automatic",...c}=e,u=C8(s),[d,h]=pne({prop:r,onChange:i,defaultProp:a??"",caller:Kae});return Nt.jsx(Qae,{scope:n,baseId:X8(),value:d,onValueChange:h,orientation:o,dir:u,activationMode:l,children:Nt.jsx(yR.div,{dir:u,"data-orientation":o,...c,ref:t})})});Zae.displayName=Kae;var Xae="TabsList",Jae=wt.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...i}=e,a=Yae(Xae,n),o=Gae(n);return Nt.jsx(qae,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:r,children:Nt.jsx(yR.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:t})})});Jae.displayName=Xae;var eoe="TabsTrigger",toe=wt.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...a}=e,o=Yae(eoe,n),s=Gae(n),l=ioe(o.baseId,r),c=aoe(o.baseId,r),u=r===o.value;return Nt.jsx(Wae,{asChild:!0,...s,focusable:!i,active:u,children:Nt.jsx(yR.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...a,ref:t,onMouseDown:x8(e.onMouseDown,e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():o.onValueChange(r)}),onKeyDown:x8(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&o.onValueChange(r)}),onFocus:x8(e.onFocus,()=>{const e="manual"!==o.activationMode;u||i||!e||o.onValueChange(r)})})})});toe.displayName=eoe;var noe="TabsContent",roe=wt.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:i,children:a,...o}=e,s=Yae(noe,n),l=ioe(s.baseId,r),c=aoe(s.baseId,r),u=r===s.value,d=wt.useRef(u);return wt.useEffect(()=>{const e=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(e)},[]),Nt.jsx(Mie,{present:i||u,children:({present:n})=>Nt.jsx(yR.div,{"data-state":u?"active":"inactive","data-orientation":s.orientation,role:"tabpanel","aria-labelledby":l,hidden:!n,id:c,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0},children:n&&a})})});function ioe(e,t){return`${e}-trigger-${t}`}function aoe(e,t){return`${e}-content-${t}`}roe.displayName=noe;var ooe=Jae,soe=toe,loe=roe;const coe=Zae,uoe=wt.forwardRef(({className:e,...t},n)=>Nt.jsx(ooe,{ref:n,className:uR("inline-flex h-10 items-center justify-center rounded-md bg-slate-100 p-1 text-slate-500",e),...t}));uoe.displayName=ooe.displayName;const doe=wt.forwardRef(({className:e,...t},n)=>Nt.jsx(soe,{ref:n,className:uR("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-2 data-[state=active]:bg-white data-[state=active]:text-slate-900",e),...t}));doe.displayName=soe.displayName;const hoe=wt.forwardRef(({className:e,...t},n)=>Nt.jsx(loe,{ref:n,className:uR("mt-4 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-2",e),...t}));hoe.displayName=loe.displayName;const foe=["TODOS","ACTIVO","PAUSADO"];function poe(){const{role:e,user:t,loading:n}=oL(),[r,i]=wt.useState(""),[a,o]=wt.useState("TODOS"),s=!!t&&!n,{data:l,isLoading:c,isFetching:u}=Oie({search:r,estatus:a},{enabled:s}),d=n||c||s&&u&&!l,h=Tie(),f=Aie(),p=function(){const e=Sm();return Im({mutationFn:e=>kie(e.id,e.usuarioId),onSuccess:()=>e.invalidateQueries({queryKey:Cie})})}(),[m,g]=wt.useState(null),[y,v]=wt.useState(!1),[b,w]=wt.useState(!1),x=["OWNER","ADMIN","VENTAS"].includes(e??""),_=wt.useMemo(()=>l?Array.from(new Set(l.map(e=>e.ciudad))).sort():[],[l]),[E,S]=wt.useState(""),k=wt.useMemo(()=>l?l.filter(e=>!E||e.ciudad===E):[],[l,E]);return Nt.jsxs("div",{className:"space-y-6",children:[Nt.jsxs(cL,{children:[Nt.jsx(uL,{children:Nt.jsx(dL,{children:"Gestión de clientes"})}),Nt.jsxs(hL,{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[Nt.jsxs("div",{className:"flex w-full flex-col gap-2 md:flex-row md:items-center",children:[Nt.jsxs("div",{className:"relative flex-1",children:[Nt.jsx($R,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-400"}),Nt.jsx(gR,{placeholder:"Buscar por nombre, alias, correo o ciudad",className:"pl-9",value:r,onChange:e=>i(e.target.value)})]}),Nt.jsxs("div",{className:"flex items-center gap-2",children:[Nt.jsx("select",{value:a,onChange:e=>o(e.target.value),className:"h-10 rounded-md border border-slate-200 bg-white px-3 text-sm",children:foe.map(e=>Nt.jsx("option",{value:e,children:e},e))}),Nt.jsxs("select",{value:E,onChange:e=>S(e.target.value),className:"h-10 rounded-md border border-slate-200 bg-white px-3 text-sm",children:[Nt.jsx("option",{value:"",children:"Todas las ciudades"}),_.map(e=>Nt.jsx("option",{value:e,children:e},e))]})]})]}),x?Nt.jsxs(wae,{open:y,onOpenChange:v,children:[Nt.jsx(xae,{asChild:!0,children:Nt.jsxs(mR,{onClick:()=>g(null),children:[Nt.jsx(VR,{className:"mr-2 h-4 w-4"})," Nuevo cliente"]})}),Nt.jsxs(Sae,{className:"max-h-[80vh] overflow-y-auto",children:[Nt.jsxs(kae,{children:[Nt.jsx(Cae,{children:m?"Editar cliente":"Nuevo cliente"}),Nt.jsx(Oae,{children:m?"Actualiza los datos del cliente y guarda los cambios registrados.":"Completa la información para registrar un nuevo cliente en el sistema."})]}),Nt.jsx(xie,{defaultValues:m??void 0,onSubmit:m?async function(e){t&&m&&(await f.mutateAsync({id:m.id,data:e,usuarioId:t.uid}),v(!1))}:async function(e){t&&(await h.mutateAsync({data:e,usuarioId:t.uid}),v(!1))},submitLabel:m?"Actualizar cliente":"Crear cliente"})]})]}):null]})]}),Nt.jsx(cL,{children:Nt.jsx(hL,{className:"p-0",children:Nt.jsxs(d8,{children:[Nt.jsx(h8,{children:Nt.jsxs(p8,{children:[Nt.jsx(m8,{children:"Cliente"}),Nt.jsx(m8,{children:"Contacto"}),Nt.jsx(m8,{children:"Ciudad"}),Nt.jsx(m8,{children:"Límite crédito"}),Nt.jsx(m8,{children:"Estatus"}),Nt.jsx(m8,{className:"text-right",children:"Acciones"})]})}),Nt.jsx(f8,{children:d?Nt.jsx(p8,{children:Nt.jsx(g8,{colSpan:6,className:"py-10 text-center text-sm text-slate-500",children:Nt.jsx(LR,{className:"mx-auto h-5 w-5 animate-spin"})})}):k.length?k.map(e=>Nt.jsxs(p8,{className:"cursor-pointer",onClick:()=>{g(e),w(!0)},children:[Nt.jsx(g8,{children:Nt.jsxs("div",{className:"flex flex-col",children:[Nt.jsx("span",{className:"font-medium text-slate-800",children:e.alias}),Nt.jsx("span",{className:"text-xs text-slate-500",children:e.nombre_legal})]})}),Nt.jsx(g8,{children:Nt.jsxs("div",{className:"flex flex-col text-sm",children:[Nt.jsx("span",{children:e.email}),Nt.jsx("span",{className:"text-xs text-slate-500",children:EL(e.telefono)})]})}),Nt.jsx(g8,{children:e.ciudad}),Nt.jsx(g8,{children:xL(e.limite_credito)}),Nt.jsx(g8,{children:Nt.jsx(u8,{variant:"ACTIVO"===e.estatus?"success":"warning",children:e.estatus})}),Nt.jsx(g8,{className:"text-right",children:Nt.jsx(mR,{size:"sm",variant:"outline",onClick:t=>{t.stopPropagation(),g(e),v(!0)},disabled:!x,children:"Editar"})})]},e.id)):Nt.jsx(p8,{children:Nt.jsx(g8,{colSpan:6,className:"py-10",children:Nt.jsx(SL,{title:"Sin clientes",description:"Agrega tu primer cliente para comenzar a registrar pedidos y cobranza."})})})})]})})}),Nt.jsx(wae,{open:b,onOpenChange:w,children:Nt.jsx(Sae,{className:"max-h-[80vh] overflow-y-auto",children:m?Nt.jsx(moe,{cliente:m,puedeEliminar:x,onEliminar:async function(e){t&&confirm(`¿Eliminar al cliente ${e.alias}?`)&&(await p.mutateAsync({id:e.id,usuarioId:t.uid}),w(!1))}}):null})})]})}function moe({cliente:e,puedeEliminar:t,onEliminar:n}){const{user:r,loading:i}=oL(),a=!!r&&!i,{data:o}=jie({clienteId:e.id},{enabled:a}),s=wt.useMemo(()=>o?o.reduce((e,t)=>e+t.saldo,0):0,[o]);return Nt.jsxs("div",{className:"space-y-6",children:[Nt.jsxs("div",{className:"flex items-start justify-between gap-4",children:[Nt.jsxs(kae,{className:"items-start text-left",children:[Nt.jsx(Cae,{className:"text-xl font-semibold text-slate-900",children:e.alias}),Nt.jsx(Oae,{children:e.nombre_legal})]}),t?Nt.jsxs(mR,{variant:"destructive",size:"sm",onClick:()=>n(e),children:[Nt.jsx(qR,{className:"mr-2 h-4 w-4"})," Eliminar"]}):null]}),Nt.jsxs(coe,{defaultValue:"datos",children:[Nt.jsxs(uoe,{children:[Nt.jsx(doe,{value:"datos",children:"Datos"}),Nt.jsx(doe,{value:"pedidos",children:"Pedidos"}),Nt.jsx(doe,{value:"saldos",children:"Saldos"})]}),Nt.jsx(hoe,{value:"datos",children:Nt.jsxs("div",{className:"grid gap-3 text-sm md:grid-cols-2",children:[Nt.jsxs("div",{children:[Nt.jsx("p",{className:"font-medium text-slate-600",children:"RFC"}),Nt.jsx("p",{children:e.rfc})]}),Nt.jsxs("div",{children:[Nt.jsx("p",{className:"font-medium text-slate-600",children:"Correo"}),Nt.jsx("p",{children:e.email})]}),Nt.jsxs("div",{children:[Nt.jsx("p",{className:"font-medium text-slate-600",children:"Teléfono"}),Nt.jsx("p",{children:EL(e.telefono)})]}),Nt.jsxs("div",{children:[Nt.jsx("p",{className:"font-medium text-slate-600",children:"Ciudad"}),Nt.jsx("p",{children:e.ciudad})]}),Nt.jsxs("div",{className:"md:col-span-2",children:[Nt.jsx("p",{className:"font-medium text-slate-600",children:"Dirección"}),Nt.jsx("p",{children:e.direccion})]}),Nt.jsxs("div",{children:[Nt.jsx("p",{className:"font-medium text-slate-600",children:"Límite de crédito"}),Nt.jsx("p",{children:xL(e.limite_credito)})]}),Nt.jsxs("div",{children:[Nt.jsx("p",{className:"font-medium text-slate-600",children:"Días de crédito"}),Nt.jsx("p",{children:e.dias_credito})]})]})}),Nt.jsx(hoe,{value:"pedidos",children:o&&o.length?Nt.jsx("div",{className:"space-y-3",children:o.map(e=>Nt.jsxs("div",{className:"rounded-lg border border-slate-200 p-4",children:[Nt.jsxs("div",{className:"flex items-center justify-between",children:[Nt.jsxs("div",{children:[Nt.jsxs("p",{className:"text-sm font-semibold",children:["Folio ",e.folio]}),Nt.jsxs("p",{className:"text-xs text-slate-500",children:["Estado: ",e.status]})]}),Nt.jsx(u8,{variant:e.saldo>0?"warning":"success",children:xL(e.saldo)})]}),Nt.jsxs("p",{className:"mt-2 text-xs text-slate-500",children:["Entrega: ",e.fecha_compromiso.toDate().toLocaleDateString()]})]},e.id))}):Nt.jsx(SL,{title:"Sin pedidos",description:"Aún no hay pedidos registrados para este cliente."})}),Nt.jsx(hoe,{value:"saldos",children:Nt.jsx(YR,{variant:s>0?"warning":"success",title:s>0?"Saldo pendiente":"Cliente al corriente",description:`Saldo total: ${xL(s)}`})})]})]})}const goe=AD(eR,"configuracion","general");async function yoe(){const e=await IM(goe);if(!e.exists()){const e={porcentaje_anticipo:50,dias_credito:30,politicas_credito:"Pagar 50% de anticipo para aprobar pedido.",roles_visibles:["OWNER","ADMIN","VENTAS","PRODUCCION","COBRANZA"]};return await DM(goe,{...e,actualizado_en:qM()}),e}return e.data()}const voe=["configuracion"];function boe(e={}){return Nm({queryKey:voe,queryFn:yoe,staleTime:3e5,enabled:e.enabled})}function woe(){const e=Sm();return Im({mutationFn:e=>async function(e,t){await DM(goe,{...e,actualizado_en:qM()},{merge:!0}),await Eie({entidad:"configuracion",entidad_id:"general",accion:"ACTUALIZAR",usuario:t,datos:e})}(e.data,e.usuarioId),onSuccess:()=>e.invalidateQueries({queryKey:voe})})}const xoe=wt.forwardRef(({className:e,...t},n)=>Nt.jsx("textarea",{ref:n,className:uR("flex min-h-[80px] w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-slate-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t}));xoe.displayName="Textarea";const _oe=["COTIZACIÓN","APROBADO","DIGITIZADO","EN_PRODUCCIÓN","CALIDAD","LISTO_ENTREGA","ENTREGADO","CERRADO","CANCELADO"],Eoe=["BAJA","MEDIA","ALTA"];function Soe(){const{user:e,role:t,loading:n}=oL(),r=!!e&&!n,{data:i,isLoading:a,isFetching:o}=jie({},{enabled:r}),s=n||a||r&&o&&!i,l=function(){const e=Sm();return Im({mutationFn:e=>Iie(e.data,e.usuarioId),onSuccess:()=>e.invalidateQueries({queryKey:Pie})})}(),c=Die(),{data:u}=Oie({},{enabled:r}),{data:d}=boe({enabled:r}),[h,f]=wt.useState(!1),[p,m]=wt.useState(null),g=["OWNER","ADMIN","VENTAS"].includes(t??""),y=["OWNER","ADMIN","PRODUCCION"].includes(t??"");return Nt.jsxs("div",{className:"space-y-6",children:[Nt.jsxs(cL,{children:[Nt.jsx(uL,{children:Nt.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[Nt.jsx(dL,{children:"Pedidos"}),g?Nt.jsxs(wae,{open:h,onOpenChange:f,children:[Nt.jsx(xae,{asChild:!0,children:Nt.jsxs(mR,{onClick:()=>m(null),children:[Nt.jsx(VR,{className:"mr-2 h-4 w-4"})," Nuevo pedido"]})}),Nt.jsx(Sae,{className:"max-h-[85vh] overflow-y-auto",children:u&&d?Nt.jsx(koe,{clientes:u,anticipoMinimo:d.porcentaje_anticipo,onSubmit:async t=>{e&&(await l.mutateAsync({data:t,usuarioId:e.uid}),f(!1))}}):Nt.jsx("div",{className:"flex h-40 items-center justify-center",children:Nt.jsx(LR,{className:"h-6 w-6 animate-spin"})})})]}):null]})}),Nt.jsx(hL,{className:"p-0",children:Nt.jsxs(d8,{children:[Nt.jsx(h8,{children:Nt.jsxs(p8,{children:[Nt.jsx(m8,{children:"Folio"}),Nt.jsx(m8,{children:"Cliente"}),Nt.jsx(m8,{children:"Estado"}),Nt.jsx(m8,{children:"Compromiso"}),Nt.jsx(m8,{children:"Saldo"}),Nt.jsx(m8,{children:"Prioridad"}),Nt.jsx(m8,{className:"text-right",children:"Acciones"})]})}),Nt.jsx(f8,{children:s?Nt.jsx(p8,{children:Nt.jsx(g8,{colSpan:7,className:"py-10 text-center",children:Nt.jsx(LR,{className:"mx-auto h-5 w-5 animate-spin text-slate-500"})})}):i&&i.length?i.map(t=>{const n=_oe.indexOf(t.status),r=_oe[n+1];return Nt.jsxs(p8,{onClick:()=>m(t),className:"cursor-pointer",children:[Nt.jsx(g8,{className:"font-medium",children:t.folio}),Nt.jsx(g8,{children:t.cliente_id.id}),Nt.jsx(g8,{children:Nt.jsx(u8,{variant:"secondary",children:t.status})}),Nt.jsx(g8,{children:_L(t.fecha_compromiso.toDate())}),Nt.jsx(g8,{children:xL(t.saldo)}),Nt.jsx(g8,{children:Nt.jsx(u8,{variant:"ALTA"===t.prioridad?"destructive":"MEDIA"===t.prioridad?"warning":"success",children:t.prioridad})}),Nt.jsx(g8,{className:"text-right",children:r&&y?Nt.jsxs(mR,{size:"sm",variant:"outline",onClick:n=>{n.stopPropagation(),async function(t,n){e&&await c.mutateAsync({id:t,estado:n,usuarioId:e.uid})}(t.id,r)},disabled:c.isPending,children:["Avanzar ",Nt.jsx(OR,{className:"ml-2 h-4 w-4"})]}):null})]},t.id)}):Nt.jsx(p8,{children:Nt.jsx(g8,{colSpan:7,className:"py-10",children:Nt.jsx(SL,{title:"Sin pedidos",description:"Registra un nuevo pedido para comenzar el flujo de trabajo."})})})})]})})]}),Nt.jsx(wae,{open:!!p,onOpenChange:e=>!e&&m(null),children:Nt.jsx(Sae,{className:"max-h-[85vh] overflow-y-auto",children:p?Nt.jsx(Coe,{pedido:p}):null})})]})}function koe({clientes:e,anticipoMinimo:t,onSubmit:n}){var r;if(!e.length)return Nt.jsx(YR,{variant:"warning",title:"No hay clientes activos",description:"Registra un cliente para asociarlo al pedido."});const[i,a]=wt.useState(1),o=pL().startOf("day"),[s,l]=wt.useState([]),[c,u]=wt.useState({folio:`QB-${pL().format("YYYYMMDD-HHmm")}`,cliente_id:(null==(r=e[0])?void 0:r.id)??"",fecha_pedido:o.toDate(),fecha_compromiso:o.add(7,"day").toDate(),status:"COTIZACIÓN",prioridad:"MEDIA",notas:"",anticipo:0,subtotal:0,descuento:0,impuestos:0,total:0,saldo:0}),d=wt.useMemo(()=>s.reduce((e,t)=>e+t.cantidad*t.precio_unitario,0),[s]),h=wt.useMemo(()=>d-c.descuento+c.impuestos,[d,c.descuento,c.impuestos]),f=wt.useMemo(()=>Math.max(h-c.anticipo,0),[h,c.anticipo]),p=wt.useMemo(()=>Number((h*t/100).toFixed(2)),[h,t]);function m(e,t,n){l(r=>r.map((r,i)=>i===e?{...r,[t]:"descripcion_item"===t||"string"==typeof n?n:Number(n)}:r))}return Nt.jsxs("div",{className:"space-y-6",children:[Nt.jsxs(kae,{children:[Nt.jsx(Cae,{children:"Nuevo pedido"}),Nt.jsx(Oae,{children:"Completa los pasos para generar el pedido y calcular los importes finales."})]}),Nt.jsxs("div",{className:"flex items-center gap-2 text-xs uppercase tracking-wide text-slate-400",children:[Nt.jsx("span",{className:1===i?"font-semibold text-primary":"",children:"Cliente"}),Nt.jsx(OR,{className:"h-3 w-3"}),Nt.jsx("span",{className:2===i?"font-semibold text-primary":"",children:"Items"}),Nt.jsx(OR,{className:"h-3 w-3"}),Nt.jsx("span",{className:3===i?"font-semibold text-primary":"",children:"Importes"}),Nt.jsx(OR,{className:"h-3 w-3"}),Nt.jsx("span",{className:4===i?"font-semibold text-primary":"",children:"Confirmar"})]}),1===i?Nt.jsxs("div",{className:"space-y-4",children:[Nt.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:["Cliente",Nt.jsx("select",{className:"h-10 rounded-md border border-slate-200 bg-white px-3",value:c.cliente_id,onChange:e=>u(t=>({...t,cliente_id:e.target.value})),children:e.map(e=>Nt.jsxs("option",{value:e.id,children:[e.alias," - ",e.ciudad]},e.id))})]}),Nt.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:["Fecha de compromiso",Nt.jsx(gR,{type:"date",value:pL(c.fecha_compromiso).format("YYYY-MM-DD"),min:o.format("YYYY-MM-DD"),onChange:e=>u(t=>({...t,fecha_compromiso:pL(e.target.value).toDate()}))})]}),Nt.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:["Prioridad",Nt.jsx("select",{className:"h-10 rounded-md border border-slate-200 bg-white px-3",value:c.prioridad,onChange:e=>u(t=>({...t,prioridad:e.target.value})),children:Eoe.map(e=>Nt.jsx("option",{value:e,children:e},e))})]}),Nt.jsx(xoe,{placeholder:"Notas generales",value:c.notas??"",onChange:e=>u(t=>({...t,notas:e.target.value}))})]}):null,2===i?Nt.jsxs("div",{className:"space-y-4",children:[s.map((e,t)=>Nt.jsxs("div",{className:"rounded-lg border border-slate-200 p-4",children:[Nt.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[Nt.jsxs("label",{className:"flex flex-col gap-1 text-xs",children:["Descripción libre",Nt.jsx(gR,{value:e.descripcion_item,onChange:e=>m(t,"descripcion_item",e.target.value)})]}),Nt.jsxs("label",{className:"flex flex-col gap-1 text-xs",children:["Prenda",Nt.jsx(gR,{value:e.prenda,onChange:e=>m(t,"prenda",e.target.value)})]}),Nt.jsxs("label",{className:"flex flex-col gap-1 text-xs",children:["Talla",Nt.jsx(gR,{value:e.talla,onChange:e=>m(t,"talla",e.target.value)})]}),Nt.jsxs("label",{className:"flex flex-col gap-1 text-xs",children:["Color",Nt.jsx(gR,{value:e.color_prenda,onChange:e=>m(t,"color_prenda",e.target.value)})]}),Nt.jsxs("label",{className:"flex flex-col gap-1 text-xs",children:["Ubicación",Nt.jsx(gR,{value:e.ubicacion,onChange:e=>m(t,"ubicacion",e.target.value)})]}),Nt.jsxs("label",{className:"flex flex-col gap-1 text-xs",children:["Puntadas estimadas",Nt.jsx(gR,{type:"number",value:e.puntadas_estimadas,onChange:e=>m(t,"puntadas_estimadas",Number(e.target.value))})]}),Nt.jsxs("label",{className:"flex flex-col gap-1 text-xs",children:["Cantidad",Nt.jsx(gR,{type:"number",min:1,value:e.cantidad,onChange:e=>m(t,"cantidad",Number(e.target.value))})]}),Nt.jsxs("label",{className:"flex flex-col gap-1 text-xs",children:["Precio unitario",Nt.jsx(gR,{type:"number",step:"0.01",value:e.precio_unitario,onChange:e=>m(t,"precio_unitario",Number(e.target.value))})]})]}),Nt.jsxs("p",{className:"mt-2 text-xs text-slate-500",children:["Importe: ",xL(e.cantidad*e.precio_unitario)]})]},t)),Nt.jsx(mR,{type:"button",variant:"outline",onClick:function(){l(e=>[...e,{descripcion_item:"",prenda:"",talla:"",color_prenda:"",ubicacion:"",puntadas_estimadas:0,cantidad:1,precio_unitario:0,observaciones:""}])},children:"Agregar item"})]}):null,3===i?Nt.jsxs("div",{className:"space-y-4",children:[Nt.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[Nt.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:["Subtotal",Nt.jsx(gR,{type:"number",readOnly:!0,value:d.toFixed(2)})]}),Nt.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:["Descuento",Nt.jsx(gR,{type:"number",step:"0.01",value:c.descuento,onChange:e=>u(t=>({...t,descuento:Number(e.target.value)}))})]}),Nt.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:["Impuestos",Nt.jsx(gR,{type:"number",step:"0.01",value:c.impuestos,onChange:e=>u(t=>({...t,impuestos:Number(e.target.value)}))})]}),Nt.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:["Anticipo",Nt.jsx(gR,{type:"number",step:"0.01",value:c.anticipo,onChange:e=>u(t=>({...t,anticipo:Number(e.target.value)}))}),Nt.jsxs("span",{className:"text-xs text-slate-500",children:["Sugerido: ",xL(p)]})]})]}),Nt.jsx(YR,{variant:c.anticipo>=p?"success":"warning",title:`Total: ${xL(h)} / Saldo: ${xL(f)}`,description:`Anticipo mínimo recomendado (${t}%): ${xL(p)}`})]}):null,4===i?Nt.jsxs("div",{className:"space-y-4 text-sm",children:[Nt.jsx(YR,{variant:"default",title:"Resumen del pedido",description:`Folio: ${c.folio} — Cliente ${c.cliente_id}`}),Nt.jsxs("div",{children:[Nt.jsx("p",{className:"font-medium text-slate-600",children:"Items"}),Nt.jsx("ul",{className:"mt-2 space-y-2 text-xs text-slate-600",children:s.map((e,t)=>Nt.jsxs("li",{className:"flex items-center justify-between",children:[Nt.jsxs("span",{children:[e.descripcion_item," · ",e.cantidad," x ",xL(e.precio_unitario)]}),Nt.jsx("span",{children:xL(e.cantidad*e.precio_unitario)})]},t))})]}),Nt.jsxs("div",{className:"text-xs text-slate-500",children:[Nt.jsxs("p",{children:["Subtotal: ",xL(d)]}),Nt.jsxs("p",{children:["Descuento: ",xL(c.descuento)]}),Nt.jsxs("p",{children:["Impuestos: ",xL(c.impuestos)]}),Nt.jsxs("p",{className:"font-semibold text-slate-700",children:["Total: ",xL(h)]}),Nt.jsxs("p",{children:["Anticipo: ",xL(c.anticipo)]}),Nt.jsxs("p",{children:["Saldo: ",xL(f)]})]})]}):null,Nt.jsxs("div",{className:"flex items-center justify-between",children:[Nt.jsx(mR,{variant:"outline",disabled:1===i,onClick:()=>a(e=>Math.max(1,e-1)),children:"Regresar"}),i<4?Nt.jsx(mR,{onClick:()=>a(e=>e+1),disabled:2===i&&0===s.length,children:"Continuar"}):Nt.jsx(mR,{onClick:async function(){if(!s.length)return void alert("Agrega al menos un item al pedido.");if(pL(c.fecha_compromiso).isBefore(o)&&!confirm("La fecha compromiso es anterior a hoy. ¿Deseas continuar?"))return;if(c.anticipo<p&&!confirm(`El anticipo es menor al ${t}% sugerido. ¿Deseas continuar?`))return;const e={...c,subtotal:d,total:h,saldo:f,items:s.map(e=>({...e,importe:e.cantidad*e.precio_unitario}))};await n(e)},children:"Crear pedido"})]})]})}function Coe({pedido:e}){return Nt.jsxs("div",{className:"space-y-4",children:[Nt.jsxs(kae,{children:[Nt.jsxs(Cae,{children:["Detalle pedido ",e.folio]}),Nt.jsx(Oae,{children:"Revisa la información general del pedido y su estado actual."})]}),Nt.jsxs("div",{className:"grid gap-3 text-sm md:grid-cols-2",children:[Nt.jsxs("div",{children:[Nt.jsx("p",{className:"font-medium text-slate-600",children:"Estado"}),Nt.jsx("p",{children:e.status})]}),Nt.jsxs("div",{children:[Nt.jsx("p",{className:"font-medium text-slate-600",children:"Saldo"}),Nt.jsx("p",{children:xL(e.saldo)})]}),Nt.jsxs("div",{children:[Nt.jsx("p",{className:"font-medium text-slate-600",children:"Compromiso"}),Nt.jsx("p",{children:_L(e.fecha_compromiso.toDate())})]}),Nt.jsxs("div",{children:[Nt.jsx("p",{className:"font-medium text-slate-600",children:"Anticipo"}),Nt.jsx("p",{children:xL(e.anticipo)})]}),Nt.jsxs("div",{className:"md:col-span-2",children:[Nt.jsx("p",{className:"font-medium text-slate-600",children:"Notas"}),Nt.jsx("p",{children:e.notas||"Sin notas"})]})]})]})}const Ooe=TD(eR,"pedidos"),Toe=TD(eR,"abonos"),Aoe=TD(eR,"movimientos_caja");async function Noe(){const e=hM(Ooe,pM("saldo",">",0),yM("saldo","desc"));return(await jM(e)).docs.map(e=>({id:e.id,...e.data()}))}const Ioe=["cobranza"];function Poe(){const e=Sm();return Im({mutationFn:e=>async function(e,t){const n=AD(eR,"pedidos",e.pedido_id),r=AD(eR,"clientes",e.cliente_id),i=AD(Toe),a=AD(Aoe);let o=0;await BM(eR,async s=>{const l=await s.get(n);if(!l.exists())throw new Error("Pedido no encontrado");const c=l.data();o=Math.max(c.saldo-e.monto,0),s.update(n,{saldo:o,actualizado_en:qM()}),s.set(i,{pedido_id:n,cliente_id:r,fecha:qO.fromDate(e.fecha),monto:e.monto,metodo:e.metodo,ref:e.ref??"",notas:e.notas??"",registrado_por:t,creado_en:qM()}),s.set(a,{fecha:qO.fromDate(e.fecha),tipo:"INGRESO",categoria:"COBRANZA",monto:e.monto,referencia_pedido_id:n,notas:`Abono ${e.metodo}`,registrado_por:t,creado_en:qM()})}),await Eie({entidad:"abonos",entidad_id:i.id,accion:"REGISTRAR_ABONO",usuario:t,datos:{pedidoId:n.id,monto:e.monto}}),await Eie({entidad:"pedidos",entidad_id:n.id,accion:"ACTUALIZAR_SALDO",usuario:t,datos:{saldo:o}})}(e.data,e.usuarioId),onSuccess:()=>{e.invalidateQueries({queryKey:Ioe}),e.invalidateQueries({queryKey:["pedidos"]})}})}const joe=["EFECTIVO","TRANSFERENCIA","TARJETA"];function Doe(){const{user:e,role:t,loading:n}=oL(),r=!!e&&!n,{data:i,isLoading:a,isFetching:o}=function(e={}){return Nm({queryKey:Ioe,queryFn:Noe,staleTime:3e4,enabled:e.enabled})}({enabled:r}),s=n||a||r&&o&&!i,l=Poe(),[c,u]=wt.useState(null),d=["OWNER","ADMIN","COBRANZA"].includes(t??"");return Nt.jsxs("div",{className:"space-y-6",children:[Nt.jsxs(cL,{children:[Nt.jsx(uL,{children:Nt.jsx(dL,{children:"Pedidos con saldo pendiente"})}),Nt.jsx(hL,{className:"p-0",children:Nt.jsxs(d8,{children:[Nt.jsx(h8,{children:Nt.jsxs(p8,{children:[Nt.jsx(m8,{children:"Folio"}),Nt.jsx(m8,{children:"Cliente"}),Nt.jsx(m8,{children:"Saldo"}),Nt.jsx(m8,{children:"Compromiso"}),Nt.jsx(m8,{children:"Estado"}),Nt.jsx(m8,{className:"text-right",children:"Acciones"})]})}),Nt.jsx(f8,{children:s?Nt.jsx(p8,{children:Nt.jsx(g8,{colSpan:6,className:"py-10 text-center text-sm text-slate-500",children:Nt.jsx(LR,{className:"mx-auto h-5 w-5 animate-spin"})})}):i&&i.length?i.map(e=>Nt.jsxs(p8,{children:[Nt.jsx(g8,{children:e.folio}),Nt.jsx(g8,{children:e.cliente_id.id}),Nt.jsx(g8,{children:xL(e.saldo)}),Nt.jsx(g8,{children:_L(e.fecha_compromiso.toDate())}),Nt.jsx(g8,{children:Nt.jsx(u8,{variant:"CERRADO"===e.status?"success":"warning",children:e.status})}),Nt.jsx(g8,{className:"text-right",children:Nt.jsx(mR,{size:"sm",onClick:()=>u(e),disabled:!d,children:"Registrar abono"})})]},e.id)):Nt.jsx(p8,{children:Nt.jsx(g8,{colSpan:6,className:"py-10",children:Nt.jsx(SL,{title:"Sin cartera vencida",description:"Todos los pedidos están al corriente."})})})})]})})]}),Nt.jsx(wae,{open:!!c,onOpenChange:e=>!e&&u(null),children:Nt.jsx(Sae,{className:"max-w-lg",children:c?Nt.jsx(Moe,{pedido:c,onClose:()=>u(null),onSubmit:async t=>{e&&(await l.mutateAsync({data:t,usuarioId:e.uid}),u(null))},isSubmitting:l.isPending}):null})})]})}function Moe({pedido:e,onSubmit:t,onClose:n,isSubmitting:r}){const[i,a]=wt.useState(pL().format("YYYY-MM-DD")),[o,s]=wt.useState(e.saldo),[l,c]=wt.useState("EFECTIVO"),[u,d]=wt.useState(""),[h,f]=wt.useState("");return Nt.jsxs("div",{className:"space-y-4",children:[Nt.jsxs(kae,{children:[Nt.jsxs(Cae,{children:["Registrar abono — ",e.folio]}),Nt.jsx(Oae,{children:"Ingresa el pago recibido y actualiza el saldo pendiente del pedido."})]}),Nt.jsxs("div",{className:"space-y-3 text-sm",children:[Nt.jsxs("div",{children:[Nt.jsx("p",{className:"font-medium text-slate-600",children:"Saldo actual"}),Nt.jsx("p",{children:xL(e.saldo)})]}),Nt.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:["Fecha",Nt.jsx(gR,{type:"date",value:i,onChange:e=>a(e.target.value)})]}),Nt.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:["Monto",Nt.jsx(gR,{type:"number",step:"0.01",value:o,onChange:e=>s(Number(e.target.value))})]}),Nt.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:["Método de pago",Nt.jsx("select",{className:"h-10 rounded-md border border-slate-200 bg-white px-3",value:l,onChange:e=>c(e.target.value),children:joe.map(e=>Nt.jsx("option",{value:e,children:e},e))})]}),Nt.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:["Referencia",Nt.jsx(gR,{value:u,onChange:e=>d(e.target.value)})]}),Nt.jsx(xoe,{placeholder:"Notas",value:h,onChange:e=>f(e.target.value)})]}),Nt.jsxs("div",{className:"flex justify-end gap-2",children:[Nt.jsx(mR,{variant:"outline",onClick:n,children:"Cancelar"}),Nt.jsx(mR,{onClick:()=>t({pedido_id:e.id,cliente_id:e.cliente_id.id,fecha:pL(i).toDate(),monto:o,metodo:l,ref:u,notas:h}),disabled:r,children:r?"Guardando...":"Registrar"})]})]})}const Roe=TD(eR,"movimientos_caja");const Loe=["caja"];function Foe(e={},t={}){return Nm({queryKey:[...Loe,e],queryFn:()=>async function(e){const t=[];(null==e?void 0:e.tipo)&&"TODOS"!==e.tipo&&t.push(pM("tipo","==",e.tipo)),(null==e?void 0:e.categoria)&&t.push(pM("categoria","==",e.categoria)),(null==e?void 0:e.desde)&&t.push(pM("fecha",">=",qO.fromDate(e.desde))),(null==e?void 0:e.hasta)&&t.push(pM("fecha","<=",qO.fromDate(e.hasta)));const n=hM(Roe,...t,yM("fecha","desc"),bM(200));return(await jM(n)).docs.map(e=>({id:e.id,...e.data()}))}(e),staleTime:3e4,enabled:t.enabled})}function zoe(){const e=Sm();return Im({mutationFn:e=>async function(e,t){const n={fecha:qO.fromDate(e.fecha),tipo:e.tipo,categoria:e.categoria,monto:e.monto,referencia_pedido_id:e.referencia_pedido_id?AD(eR,"pedidos",e.referencia_pedido_id):null,notas:e.notas??"",registrado_por:t,creado_en:qM()},r=await RM(Roe,n);await Eie({entidad:"movimientos_caja",entidad_id:r.id,accion:"CREAR",usuario:t,datos:n})}(e.data,e.usuarioId),onSuccess:()=>e.invalidateQueries({queryKey:Loe})})}function Uoe(){const{user:e,role:t,loading:n}=oL(),[r,i]=wt.useState("TODOS"),[a,o]=wt.useState(""),[s,l]=wt.useState(pL().subtract(7,"day").format("YYYY-MM-DD")),[c,u]=wt.useState(pL().format("YYYY-MM-DD")),d=!!e&&!n,{data:h,isLoading:f,isFetching:p}=Foe({tipo:r,categoria:a||void 0,desde:pL(s).toDate(),hasta:pL(c).toDate()},{enabled:d}),m=n||f||d&&p&&!h,g=zoe(),[y,v]=wt.useState(!1),b=wt.useMemo(()=>{if(!h)return{ingreso:0,egreso:0,neto:0};const e=h.filter(e=>"INGRESO"===e.tipo).reduce((e,t)=>e+t.monto,0),t=h.filter(e=>"EGRESO"===e.tipo).reduce((e,t)=>e+t.monto,0);return{ingreso:e,egreso:t,neto:e-t}},[h]);const w=["OWNER","ADMIN","COBRANZA"].includes(t??"");return Nt.jsxs("div",{className:"space-y-6",children:[Nt.jsxs(cL,{children:[Nt.jsx(uL,{children:Nt.jsx(dL,{children:"Movimientos de caja"})}),Nt.jsxs(hL,{className:"flex flex-col gap-4 md:flex-row md:items-end md:justify-between",children:[Nt.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center",children:[Nt.jsxs("label",{className:"flex flex-col gap-1 text-xs uppercase text-slate-500",children:["Tipo",Nt.jsxs("select",{className:"h-10 rounded-md border border-slate-200 bg-white px-3",value:r,onChange:e=>i(e.target.value),children:[Nt.jsx("option",{value:"TODOS",children:"Todos"}),Nt.jsx("option",{value:"INGRESO",children:"Ingresos"}),Nt.jsx("option",{value:"EGRESO",children:"Egresos"})]})]}),Nt.jsxs("label",{className:"flex flex-col gap-1 text-xs uppercase text-slate-500",children:["Categoría",Nt.jsx(gR,{value:a,onChange:e=>o(e.target.value)})]}),Nt.jsxs("label",{className:"flex flex-col gap-1 text-xs uppercase text-slate-500",children:["Desde",Nt.jsx(gR,{type:"date",value:s,onChange:e=>l(e.target.value)})]}),Nt.jsxs("label",{className:"flex flex-col gap-1 text-xs uppercase text-slate-500",children:["Hasta",Nt.jsx(gR,{type:"date",value:c,onChange:e=>u(e.target.value)})]})]}),Nt.jsxs("div",{className:"flex items-center gap-2",children:[Nt.jsxs(mR,{variant:"outline",onClick:function(){if(!h||!h.length)return;const e=h.map(e=>{var t;return`${_L(e.fecha.toDate())},${e.tipo},${e.categoria},${e.monto.toFixed(2)},${e.referencia_pedido_id?e.referencia_pedido_id.id:""},${(null==(t=e.notas)?void 0:t.replace(/,/g,";"))??""}`}).join("\n"),t=new Blob(["Fecha,Tipo,Categoría,Monto,Referencia,Notas\n"+e],{type:"text/csv;charset=utf-8;"}),n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download=`movimientos-caja-${pL().format("YYYYMMDD-HHmm")}.csv`,r.click(),URL.revokeObjectURL(n)},disabled:!(null==h?void 0:h.length),children:[Nt.jsx(DR,{className:"mr-2 h-4 w-4"})," Exportar CSV"]}),w?Nt.jsxs(wae,{open:y,onOpenChange:v,children:[Nt.jsx(xae,{asChild:!0,children:Nt.jsxs(mR,{children:[Nt.jsx(VR,{className:"mr-2 h-4 w-4"})," Nuevo movimiento"]})}),Nt.jsxs(Sae,{children:[Nt.jsxs(kae,{children:[Nt.jsx(Cae,{children:"Registrar movimiento"}),Nt.jsx(Oae,{children:"Captura un ingreso o egreso y guarda la referencia en la bitácora."})]}),Nt.jsx(Voe,{onSubmit:async t=>{e&&(await g.mutateAsync({data:t,usuarioId:e.uid}),v(!1))},onCancel:()=>v(!1),isSubmitting:g.isPending})]})]}):null]})]})]}),Nt.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[Nt.jsxs(cL,{children:[Nt.jsx(uL,{children:Nt.jsx(dL,{className:"text-sm",children:"Ingresos"})}),Nt.jsx(hL,{children:Nt.jsx("p",{className:"text-2xl font-semibold text-emerald-600",children:xL(b.ingreso)})})]}),Nt.jsxs(cL,{children:[Nt.jsx(uL,{children:Nt.jsx(dL,{className:"text-sm",children:"Egresos"})}),Nt.jsx(hL,{children:Nt.jsx("p",{className:"text-2xl font-semibold text-red-600",children:xL(b.egreso)})})]}),Nt.jsxs(cL,{children:[Nt.jsx(uL,{children:Nt.jsx(dL,{className:"text-sm",children:"Neto"})}),Nt.jsx(hL,{children:Nt.jsx("p",{className:"text-2xl font-semibold text-slate-800",children:xL(b.neto)})})]})]}),Nt.jsx(cL,{children:Nt.jsx(hL,{className:"p-0",children:Nt.jsxs(d8,{children:[Nt.jsx(h8,{children:Nt.jsxs(p8,{children:[Nt.jsx(m8,{children:"Fecha"}),Nt.jsx(m8,{children:"Tipo"}),Nt.jsx(m8,{children:"Categoría"}),Nt.jsx(m8,{children:"Monto"}),Nt.jsx(m8,{children:"Referencia pedido"}),Nt.jsx(m8,{children:"Notas"})]})}),Nt.jsx(f8,{children:m?Nt.jsx(p8,{children:Nt.jsx(g8,{colSpan:6,className:"py-10 text-center text-sm text-slate-500",children:Nt.jsx(LR,{className:"mx-auto h-5 w-5 animate-spin"})})}):h&&h.length?h.map(e=>{var t;return Nt.jsxs(p8,{children:[Nt.jsx(g8,{children:_L(e.fecha.toDate())}),Nt.jsx(g8,{children:e.tipo}),Nt.jsx(g8,{children:e.categoria}),Nt.jsx(g8,{children:xL(e.monto)}),Nt.jsx(g8,{children:(null==(t=e.referencia_pedido_id)?void 0:t.id)??"-"}),Nt.jsx(g8,{children:e.notas||"-"})]},e.id)}):Nt.jsx(p8,{children:Nt.jsx(g8,{colSpan:6,className:"py-10",children:Nt.jsx(SL,{title:"Sin movimientos",description:"Registra un ingreso o egreso para comenzar."})})})})]})})})]})}function Voe({onSubmit:e,onCancel:t,isSubmitting:n}){const[r,i]=wt.useState(pL().format("YYYY-MM-DD")),[a,o]=wt.useState("INGRESO"),[s,l]=wt.useState(""),[c,u]=wt.useState(0),[d,h]=wt.useState(""),[f,p]=wt.useState("");return Nt.jsxs("div",{className:"space-y-4",children:[Nt.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:["Fecha",Nt.jsx(gR,{type:"date",value:r,onChange:e=>i(e.target.value)})]}),Nt.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:["Tipo",Nt.jsxs("select",{className:"h-10 rounded-md border border-slate-200 bg-white px-3",value:a,onChange:e=>o(e.target.value),children:[Nt.jsx("option",{value:"INGRESO",children:"Ingreso"}),Nt.jsx("option",{value:"EGRESO",children:"Egreso"})]})]}),Nt.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:["Categoría",Nt.jsx(gR,{value:s,onChange:e=>l(e.target.value)})]}),Nt.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:["Monto",Nt.jsx(gR,{type:"number",step:"0.01",value:c,onChange:e=>u(Number(e.target.value))})]}),Nt.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:["Referencia pedido (opcional)",Nt.jsx(gR,{value:d,onChange:e=>h(e.target.value)})]}),Nt.jsx(xoe,{placeholder:"Notas",value:f,onChange:e=>p(e.target.value)}),Nt.jsxs("div",{className:"flex justify-end gap-2",children:[Nt.jsx(mR,{type:"button",variant:"outline",onClick:t,children:"Cancelar"}),Nt.jsx(mR,{onClick:()=>e({fecha:pL(r).toDate(),tipo:a,categoria:s,monto:c,referencia_pedido_id:d||void 0,notas:f}),disabled:n,children:n?"Guardando...":"Registrar"})]})]})}const $oe=["OWNER","ADMIN","VENTAS","PRODUCCION","COBRANZA"];function Boe(){const{role:e,user:t,loading:n}=oL(),r=!!t&&!n,{data:i,isLoading:a,isFetching:o}=boe({enabled:r}),s=n||a||r&&o&&!i,l=woe(),c=Kg({resolver:sw(b8),defaultValues:{porcentaje_anticipo:50,dias_credito:30,politicas_credito:"",roles_visibles:["OWNER","ADMIN","VENTAS","PRODUCCION","COBRANZA"]}});wt.useEffect(()=>{i&&c.reset(i)},[i,c]);const u=["OWNER","ADMIN"].includes(e??"");return s?Nt.jsx("div",{className:"flex h-40 items-center justify-center",children:Nt.jsx(LR,{className:"h-6 w-6 animate-spin"})}):Nt.jsx("div",{className:"space-y-6",children:Nt.jsxs(cL,{children:[Nt.jsx(uL,{children:Nt.jsx(dL,{children:"Configuraciones generales"})}),Nt.jsx(hL,{children:Nt.jsxs("form",{className:"space-y-4",onSubmit:c.handleSubmit(async function(e){t&&await l.mutateAsync({data:e,usuarioId:t.uid})}),children:[Nt.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[Nt.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:["% Anticipo mínimo",Nt.jsx(gR,{type:"number",step:"0.01",disabled:!u,...c.register("porcentaje_anticipo",{valueAsNumber:!0})})]}),Nt.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:["Días de crédito estándar",Nt.jsx(gR,{type:"number",disabled:!u,...c.register("dias_credito",{valueAsNumber:!0})})]})]}),Nt.jsxs("label",{className:"flex flex-col gap-1 text-sm",children:["Políticas de crédito y cobranza",Nt.jsx(xoe,{rows:4,disabled:!u,...c.register("politicas_credito")})]}),Nt.jsxs("div",{children:[Nt.jsx("p",{className:"mb-2 text-sm font-medium text-slate-600",children:"Roles con acceso visible en la app"}),Nt.jsx("div",{className:"flex flex-wrap gap-2",children:$oe.map(e=>{const t=c.watch("roles_visibles").includes(e);return Nt.jsx(u8,{variant:t?"success":"outline",className:"cursor-pointer",onClick:()=>{if(!u)return;const t=c.getValues("roles_visibles");t.includes(e)?c.setValue("roles_visibles",t.filter(t=>t!==e)):c.setValue("roles_visibles",[...t,e])},children:e},e)})})]}),u?Nt.jsx(mR,{type:"submit",disabled:l.isPending,children:l.isPending?"Guardando...":"Guardar cambios"}):Nt.jsx(YR,{variant:"warning",description:"Solo OWNER y ADMIN pueden actualizar la configuración."})]})})]})})}function qoe(){return Nt.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50",children:Nt.jsxs("div",{className:"flex flex-col items-center gap-3 text-slate-600",children:[Nt.jsx("span",{className:"h-10 w-10 animate-spin rounded-full border-4 border-slate-200 border-t-primary"}),Nt.jsx("p",{className:"text-sm font-medium",children:"Cargando información..."})]})})}function Woe(){const{user:e,loading:t}=oL();return t?Nt.jsx(qoe,{}):e?Nt.jsx(qf,{}):Nt.jsx(Bf,{to:"/login",replace:!0})}const Koe=[{to:"/app/dashboard",label:"Dashboard",icon:MR},{to:"/app/clientes",label:"Clientes",icon:KR},{to:"/app/pedidos",label:"Pedidos",icon:PR},{to:"/app/cobranza",label:"Cobranza",icon:jR},{to:"/app/caja",label:"Caja",icon:UR},{to:"/app/config",label:"Configuración",icon:BR}];function Hoe(){const{user:e,role:t}=oL(),[n,r]=wt.useState(!1);return Nt.jsxs("div",{className:"flex min-h-screen bg-slate-100",children:[Nt.jsxs("aside",{className:uR("fixed inset-y-0 left-0 z-40 w-72 transform border-r border-slate-200 bg-white transition-transform lg:static lg:translate-x-0",{"-translate-x-full lg:-translate-x-0":!n,"translate-x-0":n}),children:[Nt.jsxs("div",{className:"flex h-16 items-center justify-between border-b border-slate-200 px-6",children:[Nt.jsx(yp,{to:"/app/dashboard",className:"text-lg font-bold tracking-tight text-primary",children:"Quality Bordados"}),Nt.jsx("button",{className:"lg:hidden",onClick:()=>r(!1),"aria-label":"Cerrar menú",children:Nt.jsx(FR,{className:"h-4 w-4 text-slate-500"})})]}),Nt.jsx("nav",{className:"flex flex-1 flex-col gap-1 p-4",children:Koe.map(e=>{const t=e.icon;return Nt.jsxs(vp,{to:e.to,className:({isActive:e})=>uR("flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium transition-colors hover:bg-slate-100",e?"bg-slate-900 text-white hover:bg-slate-900/90":"text-slate-600"),onClick:()=>r(!1),children:[Nt.jsx(t,{className:"h-4 w-4"}),e.label]},e.to)})}),Nt.jsxs("div",{className:"border-t border-slate-200 p-4 text-xs text-slate-500",children:[Nt.jsx("p",{className:"font-medium text-slate-700",children:null==e?void 0:e.email}),Nt.jsxs("p",{className:"capitalize",children:["Rol: ",(null==t?void 0:t.toLowerCase())??"sin rol"]}),Nt.jsxs(mR,{variant:"outline",className:"mt-3 w-full",onClick:async function(){await kk(JM)},children:[Nt.jsx(FR,{className:"mr-2 h-4 w-4"})," Cerrar sesión"]})]})]}),Nt.jsxs("div",{className:"flex flex-1 flex-col lg:ml-72",children:[Nt.jsxs("header",{className:"sticky top-0 z-30 flex h-16 items-center justify-between border-b border-slate-200 bg-white px-4 lg:px-8",children:[Nt.jsxs("div",{className:"flex items-center gap-3",children:[Nt.jsx(mR,{variant:"outline",size:"icon",className:"lg:hidden",onClick:()=>r(e=>!e),children:Nt.jsx(zR,{className:"h-5 w-5"})}),Nt.jsx("h1",{className:"text-lg font-semibold text-slate-800",children:"Panel de control"})]}),Nt.jsx("div",{className:"flex items-center gap-3 text-right text-sm text-slate-600",children:Nt.jsxs("div",{children:[Nt.jsx("p",{className:"font-medium text-slate-800",children:(null==e?void 0:e.displayName)??"Equipo Quality"}),Nt.jsx("p",{className:"capitalize",children:(null==t?void 0:t.toLowerCase())??"sin rol"})]})})]}),Nt.jsx("main",{className:"flex-1 p-4 lg:p-8",children:Nt.jsx(qf,{})})]})]})}function Goe(){return Nt.jsxs(Hf,{children:[Nt.jsx(Wf,{path:"/",element:Nt.jsx(Bf,{to:"/login",replace:!0})}),Nt.jsx(Wf,{path:"/login",element:Nt.jsx(sL,{})}),Nt.jsx(Wf,{path:"/logout",element:Nt.jsx(lL,{})}),Nt.jsx(Wf,{element:Nt.jsx(Woe,{}),children:Nt.jsxs(Wf,{path:"/app",element:Nt.jsx(Hoe,{}),children:[Nt.jsx(Wf,{index:!0,element:Nt.jsx(Bf,{to:"dashboard",replace:!0})}),Nt.jsx(Wf,{path:"dashboard",element:Nt.jsx(l8,{})}),Nt.jsx(Wf,{path:"clientes",element:Nt.jsx(poe,{})}),Nt.jsx(Wf,{path:"pedidos",element:Nt.jsx(Soe,{})}),Nt.jsx(Wf,{path:"cobranza",element:Nt.jsx(Doe,{})}),Nt.jsx(Wf,{path:"caja",element:Nt.jsx(Uoe,{})}),Nt.jsx(Wf,{path:"config",element:Nt.jsx(Boe,{})})]})}),Nt.jsx(Wf,{path:"*",element:Nt.jsx(Bf,{to:"/login",replace:!0})})]})}const Qoe=new _m({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1}}});It.createRoot(document.getElementById("root")).render(Nt.jsx(xt.StrictMode,{children:Nt.jsx(km,{client:Qoe,children:Nt.jsx(aL,{children:Nt.jsx(mp,{children:Nt.jsx(Goe,{})})})})}));
